<!DOCTYPE html>
<!--
  ~ The MIT License (MIT)
  ~
  ~ Copyright (c) 2017 Twineworks GmbH
  ~
  ~ Permission is hereby granted, free of charge, to any person obtaining a copy
  ~ of this software and associated documentation files (the "Software"), to deal
  ~ in the Software without restriction, including without limitation the rights
  ~ to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  ~ copies of the Software, and to permit persons to whom the Software is
  ~ furnished to do so, subject to the following conditions:
  ~
  ~ The above copyright notice and this permission notice shall be included in all
  ~ copies or substantial portions of the Software.
  ~
  ~ THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  ~ IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  ~ FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  ~ AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  ~ LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  ~ OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
  ~ SOFTWARE.
  -->

<html>
<head>
  <meta charset="utf-8">
  <meta symbolName="generator" content="pandoc">
  <meta symbolName="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="html/styles.css">
</head>
<body>
<div id="wrapper">
<header>
<div id="sidebar-sticky">
  <div id="sidebar">
    <div class="scrollable-parent">
      <div class="nav-parent">
        <div class="nav-content">
          <nav id="TOC">
            <ul>
            <li><a href="#module-std.tf">module std.tf</a><ul>
            <li><a href="#library-core">library core</a><ul>
            <li><a href="#id">id</a></li>
            <li><a href="#inspect">inspect</a></li>
            <li><a href="#present">present?</a></li>
            <li><a href="#nil">nil?</a></li>
            <li><a href="#hash">hash</a></li>
            <li><a href="#eval">eval</a></li>
            </ul></li>
            <li><a href="#library-strings">library strings</a><ul>
            <li><a href="#concat">concat</a></li>
            <li><a href="#length">length</a></li>
            <li><a href="#substring">substring</a></li>
            <li><a href="#replace">replace</a></li>
            <li><a href="#join">join</a></li>
            <li><a href="#trim">trim</a></li>
            <li><a href="#lower_case">lower_case</a></li>
            <li><a href="#upper_case">upper_case</a></li>
            <li><a href="#comparator">comparator</a></li>
            <li><a href="#chars">chars</a></li>
            <li><a href="#split">split</a></li>
            <li><a href="#starts_with">starts_with?</a></li>
            <li><a href="#ends_with">ends_with?</a></li>
            <li><a href="#index_of">index_of</a></li>
            <li><a href="#last_index_of">last_index_of</a></li>
            </ul></li>
            <li><a href="#library-regex">library regex</a><ul>
            <li><a href="#matching">matching</a></li>
            <li><a href="#capturing">capturing</a></li>
            <li><a href="#scanning">scanning</a></li>
            <li><a href="#splitting">splitting</a></li>
            <li><a href="#replacing">replacing</a></li>
            <li><a href="#quote">quote</a></li>
            </ul></li>
            <li><a href="#library-data">library data</a><ul>
            <li><a href="#size">size</a></li>
            <li><a href="#empty">empty?</a></li>
            <li><a href="#get">get</a></li>
            <li><a href="#put">put</a></li>
            <li><a href="#get_in">get_in</a></li>
            <li><a href="#put_in">put_in</a></li>
            <li><a href="#update">update</a></li>
            <li><a href="#update_in">update_in</a></li>
            <li><a href="#keys">keys</a></li>
            <li><a href="#has">has?</a></li>
            <li><a href="#values">values</a></li>
            <li><a href="#entries">entries</a></li>
            <li><a href="#prepend">prepend</a></li>
            <li><a href="#append">append</a></li>
            <li><a href="#find">find</a></li>
            <li><a href="#find_index">find_index</a></li>
            <li><a href="#insert">insert</a></li>
            <li><a href="#delete">delete</a></li>
            <li><a href="#select">select</a></li>
            <li><a href="#filter">filter</a></li>
            <li><a href="#shuffle">shuffle</a></li>
            <li><a href="#unique">unique</a></li>
            <li><a href="#range">range</a></li>
            <li><a href="#any">any?</a></li>
            <li><a href="#none">none?</a></li>
            <li><a href="#all">all?</a></li>
            <li><a href="#init">init</a></li>
            <li><a href="#tail">tail</a></li>
            <li><a href="#head">head</a></li>
            <li><a href="#last">last</a></li>
            <li><a href="#slice">slice</a></li>
            <li><a href="#reverse">reverse</a></li>
            <li><a href="#sort">sort</a></li>
            <li><a href="#repeat">repeat</a></li>
            <li><a href="#concat-1">concat</a></li>
            <li><a href="#merge">merge</a></li>
            <li><a href="#take">take</a></li>
            <li><a href="#take_while">take_while</a></li>
            <li><a href="#take_until">take_until</a></li>
            <li><a href="#drop">drop</a></li>
            <li><a href="#drop_while">drop_while</a></li>
            <li><a href="#drop_until">drop_until</a></li>
            <li><a href="#contains">contains?</a></li>
            <li><a href="#index_of-1">index_of</a></li>
            <li><a href="#last_index_of-1">last_index_of</a></li>
            <li><a href="#key_of">key_of</a></li>
            <li><a href="#flatten">flatten</a></li>
            <li><a href="#map">map</a></li>
            <li><a href="#flatmap">flatmap</a></li>
            <li><a href="#mapcat">mapcat</a></li>
            <li><a href="#zip">zip</a></li>
            <li><a href="#zip_dict">zip_dict</a></li>
            <li><a href="#interpose">interpose</a></li>
            <li><a href="#reduce">reduce</a></li>
            <li><a href="#reduce_until">reduce_until</a></li>
            <li><a href="#reduce_while">reduce_while</a></li>
            </ul></li>
            <li><a href="#library-time">library time</a><ul>
            <li><a href="#epoch">epoch</a></li>
            <li><a href="#seconds_between">seconds_between</a></li>
            <li><a href="#minutes_between">minutes_between</a></li>
            <li><a href="#hours_between">hours_between</a></li>
            <li><a href="#days_between">days_between</a></li>
            <li><a href="#months_between">months_between</a></li>
            <li><a href="#years_between">years_between</a></li>
            <li><a href="#period_between">period_between</a></li>
            <li><a href="#duration_between">duration_between</a></li>
            <li><a href="#add_period">add_period</a></li>
            <li><a href="#add_duration">add_duration</a></li>
            <li><a href="#year">year</a></li>
            <li><a href="#month">month</a></li>
            <li><a href="#day_of_month">day_of_month</a></li>
            <li><a href="#day_of_year">day_of_year</a></li>
            <li><a href="#day_of_week">day_of_week</a></li>
            <li><a href="#hour">hour</a></li>
            <li><a href="#minute">minute</a></li>
            <li><a href="#second">second</a></li>
            <li><a href="#nano_of_second">nano_of_second</a></li>
            <li><a href="#week_of_year">week_of_year</a></li>
            <li><a href="#offset_seconds">offset_seconds</a></li>
            <li><a href="#zone">zone</a></li>
            <li><a href="#with_year">with_year</a></li>
            <li><a href="#with_month">with_month</a></li>
            <li><a href="#with_day_of_month">with_day_of_month</a></li>
            <li><a href="#with_hour">with_hour</a></li>
            <li><a href="#with_minute">with_minute</a></li>
            <li><a href="#with_second">with_second</a></li>
            <li><a href="#with_nano_of_second">with_nano_of_second</a></li>
            <li><a href="#with_zone">with_zone</a></li>
            <li><a href="#same_instant_at_zone">same_instant_at_zone</a></li>
            <li><a href="#unix_timestamp">unix_timestamp</a></li>
            <li><a href="#unix_timestamp_ms">unix_timestamp_ms</a></li>
            <li><a href="#compare">compare</a></li>
            <li><a href="#formatter">formatter</a></li>
            <li><a href="#parser">parser</a></li>
            <li><a href="#zones">zones</a></li>
            </ul></li>
            <li><a href="#library-math">library math</a><ul>
            <li><a href="#abs">abs</a></li>
            <li><a href="#rand">rand</a></li>
            <li><a href="#inc">inc</a></li>
            <li><a href="#dec">dec</a></li>
            <li><a href="#compare-1">compare</a></li>
            <li><a href="#min">min</a></li>
            <li><a href="#max">max</a></li>
            <li><a href="#round">round</a></li>
            <li><a href="#ceil">ceil</a></li>
            <li><a href="#floor">floor</a></li>
            <li><a href="#nan">nan?</a></li>
            <li><a href="#sqrt">sqrt</a></li>
            <li><a href="#sin">sin</a></li>
            <li><a href="#cos">cos</a></li>
            <li><a href="#tan">tan</a></li>
            <li><a href="#asin">asin</a></li>
            <li><a href="#acos">acos</a></li>
            <li><a href="#atan">atan</a></li>
            <li><a href="#log">log</a></li>
            <li><a href="#log10">log10</a></li>
            <li><a href="#bit_count">bit_count</a></li>
            <li><a href="#formatter-1">formatter</a></li>
            <li><a href="#parser-1">parser</a></li>
            <li><a href="#e">e</a></li>
            <li><a href="#pi">pi</a></li>
            <li><a href="#min_long">min_long</a></li>
            <li><a href="#max_long">max_long</a></li>
            </ul></li>
            <li><a href="#library-fun">library fun</a><ul>
            <li><a href="#times">times</a></li>
            <li><a href="#until">until</a></li>
            <li><a href="#while">while</a></li>
            <li><a href="#iterate">iterate</a></li>
            <li><a href="#thread">thread</a></li>
            <li><a href="#chain">chain</a></li>
            <li><a href="#compose">compose</a></li>
            <li><a href="#signature">signature</a></li>
            </ul></li>
            <li><a href="#library-locale">library locale</a><ul>
            <li><a href="#languages">languages</a></li>
            <li><a href="#decimal_symbols">decimal_symbols</a></li>
            </ul></li>
            </ul></li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
  </div>
</div>
</header>

<section>
<div id="content">
<h1 id="module-std.tf">module std.tf</h1>
<p>The standard module contains basic functions for general computing tasks.</p>
<h2 id="library-core">library core</h2>
<p>The core library contains utility functions to process values at a basic level.</p>
<h3 id="id">id</h3>
<p><code>(any x) -&gt; any</code></p>
<p>Identity function. Returns <code>x</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; core.id(<span class="st">&quot;foo&quot;</span>)
<span class="st">&quot;foo&quot;</span>

&gt; core.id({<span class="st">:a</span> <span class="st">&quot;b&quot;</span>})
{
  <span class="st">:a</span> <span class="st">&quot;b&quot;</span>
}

&gt; core.id(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="inspect">inspect</h3>
<p><code>(x) -&gt; string</code></p>
<p>Returns a string representation of <code>x</code>.
If <code>x</code> is a function the string <code>'function'</code> is returned.
Otherwise literal notation is used.
If <code>x</code> is not a function, and contains no functions as children <code>x == core.eval(core.inspect(x))</code> generally holds true.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; core.inspect(<span class="dv">1</span>)
<span class="st">&quot;1&quot;</span>

&gt; core.inspect([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])
<span class="st">&quot;[1, 2, 3]&quot;</span>

&gt; core.inspect(<span class="dv">nil</span>)
<span class="st">&quot;nil&quot;</span>

&gt; core.inspect({<span class="st">:a</span> <span class="dv">1</span>, <span class="st">:b</span> <span class="dv">2</span>})
<span class="st">&quot;{</span>
<span class="st">  :a 1,</span>
<span class="st">  :b 2</span>
<span class="st">}&quot;</span>

&gt; core.inspect(<span class="st">&quot;foo&quot;</span>)
<span class="st">&quot;\&quot;foo\&quot;&quot;</span></code></pre></div>
<h3 id="present">present?</h3>
<p><code>(x) -&gt; boolean</code></p>
<p>Returns <code>false</code> if <code>x</code> is <code>nil</code>, returns <code>true</code> otherwise.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; core.present?(<span class="st">&quot;foo&quot;</span>)
<span class="dv">true</span>

&gt; core.present?(<span class="dv">nil</span>)
<span class="dv">false</span></code></pre></div>
<h3 id="nil">nil?</h3>
<p><code>(x) -&gt; boolean</code></p>
<p>Returns <code>true</code> if <code>x</code> is <code>nil</code>, returns <code>false</code> otherwise.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; core.nil?(<span class="st">&quot;foo&quot;</span>)
<span class="dv">false</span>

&gt; core.nil?(<span class="dv">nil</span>)
<span class="dv">true</span></code></pre></div>
<h3 id="hash">hash</h3>
<p><code>(x) -&gt; long</code></p>
<p>Returns a hashcode of <code>x</code>. Values that compare as equal are guaranteed to have the same hashcode.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; core.hash(<span class="st">&quot;foo&quot;</span>)
<span class="dv">101574</span>

&gt; core.hash(<span class="dv">nil</span>)
<span class="dv">0</span>

&gt; core.hash([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])
<span class="dv">66614367</span>

&gt; core.hash([<span class="fl">1.0</span>, <span class="fl">2.0</span>, <span class="fl">3.0</span>])
<span class="dv">66614367</span></code></pre></div>
<h3 id="eval">eval</h3>
<p><code>(string x) -&gt; any</code></p>
<p>Evaluates tweakflow source code <code>x</code> in empty scope.
If <code>x</code> represents a valid value, the value it is returned.
If <code>x</code> cannot be evaluated, an error is thrown.
<code>x</code> is evaluated in empty scope, so any references within <code>x</code> must be self-contained.
Functions can be declared and called within <code>x</code>.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; core.eval(<span class="st">&quot;1&quot;</span>)
<span class="dv">1</span>

&gt; core.eval(<span class="st">&quot;&#39;str&#39;&quot;</span>)
<span class="st">&quot;str&quot;</span>

&gt; core.eval(<span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; core.eval(<span class="st">&quot;(x) -&gt; x+1&quot;</span>)(<span class="dv">1</span>)
<span class="dv">2</span>

&gt; core.eval(<span class="st">&quot;let {f: (x) -&gt; x*x} f(5)&quot;</span>)
<span class="dv">25</span>

&gt; core.eval(<span class="st">&quot;hello&quot;</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:code</span> <span class="st">&quot;UNRESOLVED_REFERENCE&quot;</span>,
  <span class="st">:source</span> <span class="st">&quot;hello&quot;</span>
  ...
}</code></pre></div>
<h2 id="library-strings">library strings</h2>
<p>The strings library contains basic functions for text processing.</p>
<h3 id="concat">concat</h3>
<p><code>(list xs) -&gt; string</code></p>
<p>Returns a string consisting of all <code>xs</code> concatenated into a single string.
Each <code>x</code> in <code>xs</code> is cast to a string before concatenation.
If any <code>x</code> cannot be cast to a string, an error is thrown.
If any <code>x</code> is <code>nil</code>, it is concatenated into the output string as <code>&quot;nil&quot;</code>.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; strings.concat([<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span>])
<span class="st">&quot;foobar&quot;</span>

&gt; strings.concat([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])
<span class="st">&quot;123&quot;</span>

&gt; strings.concat([<span class="st">&quot;a&quot;</span>, <span class="dv">nil</span>, <span class="st">&quot;b&quot;</span>])
<span class="st">&quot;anilb&quot;</span>

&gt; strings.concat([])
<span class="st">&quot;&quot;</span>

&gt; strings.concat(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="length">length</h3>
<p><code>(string x) -&gt; long</code></p>
<p>Returns the number of unicode codepoints in given string <code>x</code>.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; strings.length(<span class="st">&quot;&quot;</span>)
<span class="dv">0</span>

&gt; strings.length(<span class="st">&quot;foo&quot;</span>)
<span class="dv">3</span>

&gt; strings.length(<span class="st">&quot;你好&quot;</span>)
<span class="dv">2</span></code></pre></div>
<h3 id="substring">substring</h3>
<p><code>(string x, long from=0, long to=nil) -&gt; string</code></p>
<p>Returns a substring of <code>x</code> beginning at index <code>from</code> (inclusive) up to index <code>to</code> (exclusive). If <code>to</code> is <code>nil</code>, the substring extends to the end of <code>x</code>.</p>
<p>Returns an empty string if <code>to &lt;= from</code>.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<p>Throws an error if <code>from</code> is <code>nil</code> or <code>from &lt; 0</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; strings.substring(<span class="st">&quot;hello world&quot;</span>)
<span class="st">&quot;hello world&quot;</span>

&gt; strings.substring(<span class="st">&quot;hello world&quot;</span>, <span class="dv">6</span>)
<span class="st">&quot;world&quot;</span>

&gt; strings.substring(<span class="st">&quot;hello world&quot;</span>, <span class="dv">6</span>, <span class="dv">6</span>)
<span class="st">&quot;&quot;</span>

&gt; strings.substring(<span class="st">&quot;hello world&quot;</span>, <span class="dv">6</span>, <span class="dv">7</span>)
<span class="st">&quot;w&quot;</span>

&gt; strings.substring(<span class="st">&quot;hello world&quot;</span>, <span class="dv">6</span>, <span class="dv">11</span>)
<span class="st">&quot;world&quot;</span>

&gt; strings.substring(<span class="st">&quot;hello world&quot;</span>, <span class="dv">6</span>, -<span class="dv">2</span>)
<span class="st">&quot;&quot;</span>

&gt; strings.substring(<span class="dv">nil</span>, <span class="dv">6</span>)
<span class="dv">nil</span>

&gt; strings.substring(<span class="st">&quot;你好&quot;</span>, <span class="dv">0</span>, <span class="dv">1</span>)
<span class="st">&quot;你&quot;</span>

&gt; strings.substring(<span class="st">&quot;你好&quot;</span>, <span class="dv">1</span>, <span class="dv">2</span>)
<span class="st">&quot;好&quot;</span>

&gt; strings.substring(<span class="st">&quot;hello world&quot;</span>, <span class="dv">nil</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;from must not be nil&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;NIL_ERROR&quot;</span>,
  ...
}

&gt; strings.substring(<span class="st">&quot;hello world&quot;</span>, -<span class="dv">4</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;from must not be negative: -4&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;INDEX_OUT_OF_BOUNDS&quot;</span>,
}</code></pre></div>
<h3 id="replace">replace</h3>
<p><code>(string x, string search, string replace) -&gt; string</code></p>
<p>Returns a string where each occurrence of <code>search</code> in <code>x</code> is replaced with <code>replace</code>.
The replacement happens from left to right,
so <code>search.replace('ooo', 'oo', 'g')</code> results in <code>'go'</code> rather than <code>'og'</code>.</p>
<p>Returns <code>nil</code> if any argument is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; strings.replace(<span class="st">&#39;ooo&#39;</span>, <span class="st">&#39;oo&#39;</span>, <span class="st">&#39;g&#39;</span>)
<span class="st">&quot;go&quot;</span>

&gt; strings.replace(<span class="st">&#39;foo&#39;</span>, <span class="st">&#39;oo&#39;</span>, <span class="st">&#39;ast&#39;</span>)
<span class="st">&quot;fast&quot;</span>

&gt; strings.replace(<span class="st">&#39;hello&#39;</span>, <span class="st">&#39;e&#39;</span>, <span class="st">&#39;u&#39;</span>)
<span class="st">&quot;hullo&quot;</span>

&gt; strings.replace(<span class="st">&#39;grab&#39;</span>, <span class="st">&#39;gr&#39;</span>, <span class="st">&#39;&#39;</span>)
<span class="st">&quot;ab&quot;</span>

&gt; strings.replace(<span class="st">&#39;hello world&#39;</span>, <span class="st">&#39;not found&#39;</span>, <span class="st">&#39;something&#39;</span>)
<span class="st">&quot;hello world&quot;</span></code></pre></div>
<h3 id="join">join</h3>
<p><code>(list xs, string s=&quot;&quot;) -&gt; string</code></p>
<p>Concatenates a list of <code>xs</code> into a single string using <code>s</code> as the separator.
Each <code>x</code> in <code>xs</code> is cast to a string before concatenation.
If any <code>x</code> cannot be cast to a string, an error is thrown.
If any <code>x</code> is <code>nil</code>, it is concatenated into the output string as <code>&quot;nil&quot;</code>.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code> or <code>s</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; strings.join([<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span>])
<span class="st">&quot;foobar&quot;</span>

&gt; strings.join([<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span>], <span class="st">&quot;, &quot;</span>)
<span class="st">&quot;foo, bar&quot;</span>

&gt; strings.join([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], <span class="st">&quot;-&quot;</span>)
<span class="st">&quot;1-2-3&quot;</span>

&gt; strings.join([<span class="dv">1</span>, <span class="dv">nil</span>, <span class="dv">3</span>], <span class="st">&quot;-&quot;</span>)
<span class="st">&quot;1-nil-3&quot;</span>

&gt; strings.join([])
<span class="st">&quot;&quot;</span>

&gt; strings.join(<span class="dv">nil</span>, <span class="st">&quot;, &quot;</span>)
<span class="dv">nil</span>

&gt; strings.join([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>], <span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="trim">trim</h3>
<p><code>(string x) -&gt; string</code></p>
<p>Returns <code>x</code> with leading and trailing whitespace characters removed.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; strings.trim(<span class="st">&quot;  foo  &quot;</span>)
<span class="st">&quot;foo&quot;</span>

&gt; strings.trim(<span class="st">&quot;line\r\n&quot;</span>)
<span class="st">&quot;line&quot;</span>

&gt; strings.trim(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="lower_case">lower_case</h3>
<p><code>(string x, string lang='en-US') -&gt; string</code></p>
<p>Returns <code>x</code> with all characters converted to lower case as per conventions of the given language tag.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code> or <code>lang</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; strings.lower_case(<span class="st">&quot;FOO&quot;</span>)
<span class="st">&quot;foo&quot;</span>

&gt; strings.lower_case(<span class="st">&quot;TITLE&quot;</span>)
<span class="st">&quot;title&quot;</span>

&gt; strings.lower_case(<span class="st">&quot;TITLE&quot;</span>, <span class="st">&quot;tr&quot;</span>)
<span class="st">&quot;tıtle&quot;</span> <span class="co"># note the dotless i in turkish language</span></code></pre></div>
<h3 id="upper_case">upper_case</h3>
<p><code>(string x, string lang='en-US') -&gt; string</code></p>
<p>Returns <code>x</code> with all characters converted to uper case as per conventions of the given language tag.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code> or <code>lang</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; strings.upper_case(<span class="st">&quot;foo&quot;</span>)
<span class="st">&quot;FOO&quot;</span>

&gt; strings.upper_case(<span class="st">&quot;straße&quot;</span>)
<span class="st">&quot;STRASSE&quot;</span> <span class="co"># note that some characters may expand to multiple characters</span>

&gt; strings.upper_case(<span class="st">&quot;title&quot;</span>, <span class="st">&quot;tr&quot;</span>)
<span class="st">&quot;TİTLE&quot;</span> <span class="co"># note the dotted upper case I in turkish language</span></code></pre></div>
<h3 id="comparator">comparator</h3>
<p><code>(string lang='en-US', boolean case_sensitive=true) -&gt; function</code></p>
<p>Returns a function <code>f (string a, string b) -&gt; long</code> that compares two strings <code>a</code> and <code>b</code> according to conventions appropriate for the given language tag.
If <code>case_sensitive</code> is <code>true</code>, lower case characters precede their upper case counterparts.
If <code>case_sensitive</code> is <code>false</code>, lower case characters are considered equal to their upper case conterparts.</p>
<p><code>f</code> returns -1 if a &lt; b.<br />
<code>f</code> returns 1 if a &gt; b.<br />
<code>f</code> returns 0 if a == b.<br />
<code>f</code> considers <code>nil</code> less than any non-nil string.</p>
<p>Throws an error if any argument is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; <span class="st">f: </span>strings.comparator(<span class="st">&quot;en-US&quot;</span>, <span class="dv">true</span>)
function

&gt; f(<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;FOO&quot;</span>)
-<span class="dv">1</span>

&gt; <span class="st">f: </span>strings.comparator(<span class="st">&quot;en-US&quot;</span>, <span class="dv">false</span>)
function

&gt; f(<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;FOO&quot;</span>)
<span class="dv">0</span>

&gt; data.sort([<span class="st">&quot;Foo&quot;</span>, <span class="st">&quot;Bar&quot;</span>, <span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span>, <span class="dv">nil</span>], strings.comparator(<span class="st">&quot;en-US&quot;</span>, <span class="dv">true</span>))
[<span class="dv">nil</span>, <span class="st">&quot;bar&quot;</span>, <span class="st">&quot;Bar&quot;</span>, <span class="st">&quot;foo&quot;</span>, <span class="st">&quot;Foo&quot;</span>]

&gt; data.sort([<span class="st">&quot;Foo&quot;</span>, <span class="st">&quot;Bar&quot;</span>, <span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span>, <span class="dv">nil</span>], strings.comparator(<span class="st">&quot;en-US&quot;</span>, <span class="dv">false</span>))
[<span class="dv">nil</span>, <span class="st">&quot;Bar&quot;</span>, <span class="st">&quot;bar&quot;</span>, <span class="st">&quot;Foo&quot;</span>, <span class="st">&quot;foo&quot;</span>]</code></pre></div>
<h3 id="chars">chars</h3>
<p><code>(string x) -&gt; list</code></p>
<p>Returns a list of unicode codepoints that make up given string <code>x</code>.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; strings.chars(<span class="st">&quot;foo&quot;</span>)
[<span class="st">&quot;f&quot;</span>, <span class="st">&quot;o&quot;</span>, <span class="st">&quot;o&quot;</span>]

&gt; strings.chars(<span class="st">&quot;你好&quot;</span>)
[<span class="st">&quot;你&quot;</span>, <span class="st">&quot;好&quot;</span>]

&gt; strings.chars(<span class="st">&quot;&quot;</span>)
[]

&gt; strings.chars(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="split">split</h3>
<p><code>(string x, string s=&quot; &quot;) -&gt; list</code></p>
<p>Returns a list of strings obtained by splitting <code>x</code> using separator <code>s</code>.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code> or <code>s</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; strings.split(<span class="st">&quot;hello world&quot;</span>)
[<span class="st">&quot;hello&quot;</span>, <span class="st">&quot;world&quot;</span>]

&gt; strings.split(<span class="st">&quot;a,b,c&quot;</span>, <span class="st">&quot;,&quot;</span>)
[<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>]</code></pre></div>
<h3 id="starts_with">starts_with?</h3>
<p><code>(string x, string init) -&gt; boolean</code></p>
<p>Returns <code>true</code> if <code>x</code> starts with the substring <code>init</code>.<br />
Returns <code>false</code> otherwise.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code> or <code>init</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; strings.starts_with?(<span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;yell&quot;</span>)
<span class="dv">true</span>

&gt; strings.starts_with?(<span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;blue&quot;</span>)
<span class="dv">false</span>

&gt; strings.starts_with?(<span class="dv">nil</span>, <span class="st">&quot;blue&quot;</span>)
<span class="dv">nil</span>

&gt; strings.starts_with?(<span class="st">&quot;yellow&quot;</span>, <span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="ends_with">ends_with?</h3>
<p><code>(string x, string tail) -&gt; boolean</code></p>
<p>Returns <code>true</code> if <code>x</code> ends with the substring <code>tail</code>.<br />
Returns <code>false</code> otherwise.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code> or <code>tail</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; strings.ends_with?(<span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;low&quot;</span>)
<span class="dv">true</span>

&gt; strings.ends_with?(<span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;high&quot;</span>)
<span class="dv">false</span>

&gt; strings.ends_with?(<span class="dv">nil</span>, <span class="st">&quot;blue&quot;</span>)
<span class="dv">nil</span>

&gt; strings.ends_with?(<span class="st">&quot;yellow&quot;</span>, <span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="index_of">index_of</h3>
<p><code>(string x, string sub, long from=0) -&gt; long</code></p>
<p>If <code>x</code> contains <code>sub</code> at or past index <code>from</code>, the function returns the index of the first occurrence of <code>sub</code>
at or past index <code>from</code>.</p>
<p>Returns <code>-1</code> otherwise.</p>
<p>Returns <code>nil</code> if any argument is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; strings.index_of(<span class="st">&quot;foobar&quot;</span>, <span class="st">&quot;foo&quot;</span>)
<span class="dv">0</span>

&gt; strings.index_of(<span class="st">&quot;foobar&quot;</span>, <span class="st">&quot;bar&quot;</span>)
<span class="dv">3</span>

&gt; strings.index_of(<span class="st">&quot;foobar&quot;</span>, <span class="st">&quot;hello&quot;</span>)
-<span class="dv">1</span>

&gt; strings.index_of(<span class="st">&quot;foobar&quot;</span>, <span class="st">&quot;bar&quot;</span>, <span class="dv">3</span>)
<span class="dv">3</span>

&gt; strings.index_of(<span class="st">&quot;foobar&quot;</span>, <span class="st">&quot;bar&quot;</span>, <span class="dv">4</span>)
-<span class="dv">1</span></code></pre></div>
<h3 id="last_index_of">last_index_of</h3>
<p><code>(string x, string sub, long end=nil) -&gt; long</code></p>
<p>If <code>x</code> contains <code>sub</code> at or before index <code>end</code> returns the index of the last such occurrence. Returns <code>-1</code> otherwise.
If <code>end</code> is <code>nil</code>, it is interpreted as the last index of <code>x</code>.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code> or <code>sub</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; strings.last_index_of(<span class="st">&quot;elementary&quot;</span>, <span class="st">&quot;e&quot;</span>)
<span class="dv">4</span>

&gt; strings.last_index_of(<span class="st">&quot;elementary&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="dv">100</span>)
<span class="dv">4</span>

&gt; strings.last_index_of(<span class="st">&quot;elementary&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="dv">3</span>)
<span class="dv">2</span>

&gt; strings.last_index_of(<span class="st">&quot;elementary&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="dv">1</span>)
<span class="dv">0</span>

&gt; strings.last_index_of(<span class="st">&quot;elementary&quot;</span>, <span class="st">&quot;e&quot;</span>, -<span class="dv">5</span>)
-<span class="dv">1</span>

&gt; strings.last_index_of(<span class="st">&quot;elementary&quot;</span>, <span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; strings.last_index_of(<span class="dv">nil</span>, <span class="st">&quot;e&quot;</span>)
<span class="dv">nil</span></code></pre></div>
<h2 id="library-regex">library regex</h2>
<p>The regex library provides functions to work with regular expressions.
Pattern syntax is that of the <a href="https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html">Java regular expression language</a>.</p>
<h3 id="matching">matching</h3>
<p><code>(string pattern) -&gt; function</code></p>
<p>Returns a predicate function <code>f</code> accepting one string argument, that checks if the argument matches the given <code>pattern</code> completely.
Calling <code>f</code> with a <code>nil</code> argument returns <code>nil</code>.</p>
<p>Throws an error if <code>pattern</code> is <code>nil</code> or not a valid regular expression.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; <span class="st">digits?: </span>regex.matching(<span class="st">&#39;\d+&#39;</span>)
function

&gt; digits?(<span class="st">&quot;12345&quot;</span>)
<span class="dv">true</span>

&gt; digits?(<span class="st">&quot;hello&quot;</span>)
<span class="dv">false</span>

&gt; digits?(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="capturing">capturing</h3>
<p><code>(string pattern) -&gt; function</code></p>
<p>Returns a function <code>f</code> accepting one string argument and returning a list of captured groups in the pattern.</p>
<p>In case <code>pattern</code> matches the argument entirely, index <code>0</code> contains the input string, and subsequent indexes contain
the matched groups. Group indexes correspond to the sequence of opening group parentheses of capturing groups in the pattern.
If a group is optional, and is not matched by the input string, its value in the list is <code>nil</code>.</p>
<p>In case <code>pattern</code> does not match the argument entirely, <code>f</code> returns an empty list.</p>
<p>Calling <code>f</code> with a <code>nil</code> argument returns <code>nil</code>.</p>
<p>Throws an error if <code>pattern</code> is <code>nil</code> or not a valid regular expression.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span class="co"># match ISO date and optional hh:mm time, capturing year, month, day, time</span>
&gt; <span class="st">date_parts: </span>regex.capturing(<span class="st">&#39;(\d{4})-(\d{2})-(\d{2})(?:T(\d{2}:\d{2}))?&#39;</span>)
function

&gt; date_parts(<span class="st">&quot;2017-05-24&quot;</span>)
[<span class="st">&quot;2017-05-24&quot;</span>, <span class="st">&quot;2017&quot;</span>, <span class="st">&quot;05&quot;</span>, <span class="st">&quot;24&quot;</span>, <span class="dv">nil</span>]

&gt; date_parts(<span class="st">&quot;2017-05-24T08:45&quot;</span>)
[<span class="st">&quot;2017-05-24T08:45&quot;</span>, <span class="st">&quot;2017&quot;</span>, <span class="st">&quot;05&quot;</span>, <span class="st">&quot;24&quot;</span>, <span class="st">&quot;08:45&quot;</span>]

&gt; date_parts(<span class="st">&quot;hello&quot;</span>)
[]

&gt; date_parts(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="scanning">scanning</h3>
<p><code>(string pattern) -&gt; function</code></p>
<p>Returns a function <code>f</code> accepting one string argument <code>x</code> and returning a list of captured groups for each successive match
of the pattern in <code>x</code>.</p>
<p>Each match generates a list with the following properties: Index <code>0</code> contains the matched input string, and subsequent indexes contain
the matched groups. Group indexes correspond to the sequence of opening group parentheses of capturing groups in the pattern.
If a group is optional, and is not matched by the input string, its value in the list is <code>nil</code>.</p>
<p>In case <code>pattern</code> does not match <code>x</code>, <code>f</code> returns an empty list.</p>
<p>Calling <code>f</code> with a <code>nil</code> argument returns <code>nil</code>.</p>
<p>Throws an error if <code>pattern</code> is <code>nil</code> or not a valid regular expression.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span class="co"># scan for hh:mm pattern, capturing hours and minutes separately for each match.</span>
<span class="co"># AM/PM indicator is optional.</span>
&gt; <span class="st">clock_times: </span>regex.scanning(<span class="st">&#39;(\d{1,2}):(\d{2})( AM| PM)?&#39;</span>)
function

<span class="co"># 1 match</span>
&gt; clock_times(<span class="st">&quot;It was 9:30 AM.&quot;</span>)
[[<span class="st">&quot;9:30 AM&quot;</span>, <span class="st">&quot;9&quot;</span>, <span class="st">&quot;30&quot;</span>, <span class="st">&quot; AM&quot;</span>]]

<span class="co"># 2 matches, optional AM/PM indicator is missing on second match</span>
&gt; clock_times(<span class="st">&quot;The hen jumped over the fence at 10:32 PM, the fox followed at 10:42.&quot;</span>)
[[<span class="st">&quot;10:32 PM&quot;</span>, <span class="st">&quot;10&quot;</span>, <span class="st">&quot;32&quot;</span>, <span class="st">&quot; PM&quot;</span>], [<span class="st">&quot;10:42&quot;</span>, <span class="st">&quot;10&quot;</span>, <span class="st">&quot;42&quot;</span>, <span class="dv">nil</span>]]

<span class="co"># no matches</span>
&gt; clock_times(<span class="st">&quot;Hello world!&quot;</span>)
[]

&gt; clock_times(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="splitting">splitting</h3>
<p><code>(string pattern, long limit=nil) -&gt; function</code></p>
<p>Returns a function <code>f</code> accepting one string argument <code>x</code> and returning a list substrings of <code>x</code> split on boundaries given by <code>pattern</code>.</p>
<p>If <code>limit</code> is positive, the pattern is applied <code>limit-1</code> times, so at most <code>limit</code> items are in the resulting list.<br />
If <code>limit</code> is negative, the pattern is applied as often as possible and there is no limit on the size of the resulting list.<br />
If <code>limit</code> is <code>0</code> or <code>nil</code>, the pattern is applied as often as possible, and there is no limit on the size of the resulting list. Trailing
empty strings are removed from the list.</p>
<p>In case <code>pattern</code> is not found in <code>x</code>, <code>f</code> returns a list containing only <code>x</code>.</p>
<p>Calling <code>f</code> with a <code>nil</code> argument returns <code>nil</code>.</p>
<p>Throws an error if <code>pattern</code> is <code>nil</code> or not a valid regular expression.<br />
</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span class="co"># split on space</span>
&gt; <span class="st">f: </span>regex.splitting(<span class="st">&#39; &#39;</span>)
function

&gt; f(<span class="st">&quot;Hello World!&quot;</span>)
[<span class="st">&quot;Hello&quot;</span>, <span class="st">&quot;World!&quot;</span>]

<span class="co"># split on word boundary</span>
&gt; <span class="st">f: </span>regex.splitting(<span class="ch">&#39;\b&#39;</span>)
function

&gt; f(<span class="st">&quot;Hello World!&quot;</span>)
[<span class="st">&quot;Hello&quot;</span>, <span class="st">&quot; &quot;</span>, <span class="st">&quot;World&quot;</span>, <span class="st">&quot;!&quot;</span>]

<span class="co"># split on comma potentially followed by space</span>
&gt; <span class="st">f: </span>regex.splitting(<span class="st">&#39;,( )?&#39;</span>)
function

&gt; f(<span class="st">&quot;some, CSV,data, here&quot;</span>)
[<span class="st">&quot;some&quot;</span>, <span class="st">&quot;CSV&quot;</span>, <span class="st">&quot;data&quot;</span>, <span class="st">&quot;here&quot;</span>]

<span class="co"># split out 2 initial sections between dashes</span>
&gt; <span class="st">f: </span>regex.splitting(<span class="st">&#39;-&#39;</span>, <span class="dv">3</span>)
function

&gt; f(<span class="st">&quot;abc-def-xyhaiod-28734-as2&quot;</span>)
[<span class="st">&quot;abc&quot;</span>, <span class="st">&quot;def&quot;</span>, <span class="st">&quot;xyhaiod-28734-as2&quot;</span>]

&gt; f(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="replacing">replacing</h3>
<p><code>(string pattern, string replace) -&gt; function</code></p>
<p>Returns a function <code>f</code> accepting one string argument and returning a string replacing all occurrences of <code>pattern</code> with <code>replace</code>.
References to capturing groups in <code>replace</code> are possible through <code>$n</code> syntax, where <code>n</code> is the number of the capturing group, as counted by
the occurrence of opening group parentheses. To replace a literal <code>$n</code>, escape the <code>$</code> sign as <code>\$</code>.</p>
<p>Calling <code>f</code> with a <code>nil</code> argument returns <code>nil</code>.</p>
<p>Throws an error if any argument is <code>nil</code> or <code>pattern</code> is not a valid regular expression.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span class="co"># match date in yyyy/dd/mm format and convert to ISO date</span>
&gt; <span class="st">to_iso_date: </span>regex.replacing(<span class="st">&#39;(\d{4})/(\d{2})/(\d{2})&#39;</span>, <span class="st">&#39;$1-$3-$2&#39;</span>)
function

&gt; to_iso_date(<span class="st">&quot;2017/24/05&quot;</span>)
<span class="st">&quot;2017-05-24&quot;</span>

&gt; to_iso_date(<span class="st">&quot;hello&quot;</span>)
<span class="st">&quot;hello&quot;</span>

&gt; to_iso_date(<span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; <span class="st">nr_dollar: </span>regex.replacing(<span class="st">&#39;\b(a dollar)|(one dollar)\b&#39;</span>, <span class="st">&#39;\$1&#39;</span>)
function

&gt; nr_dollar(<span class="st">&quot;I need a dollar, just one dollar more.&quot;</span>)
<span class="st">&quot;I need $1, just $1 more.&quot;</span></code></pre></div>
<h3 id="quote">quote</h3>
<p><code>(string x) -&gt; string</code></p>
<p>Returns a string in which each character of <code>x</code> with special meaning in a pattern has been escaped.
The resulting string matches <code>x</code> literally as a pattern.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span class="co"># splits by word boundary</span>
&gt; <span class="st">f: </span>regex.splitting(<span class="ch">&#39;\b&#39;</span>)
function

&gt; f(<span class="st">&#39;foo\bbar\bbaz&#39;</span>)
[<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;\\&quot;</span>, <span class="st">&quot;bbar&quot;</span>, <span class="st">&quot;\\&quot;</span>, <span class="st">&quot;bbaz&quot;</span>]

<span class="co"># splits by literal sequence of characters &#39;\b&#39;</span>
&gt; <span class="st">f: </span>regex.splitting(regex.quote(<span class="ch">&#39;\b&#39;</span>))
function

&gt; f(<span class="st">&#39;foo\bbar\bbaz&#39;</span>)
[<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span>, <span class="st">&quot;baz&quot;</span>]</code></pre></div>
<h2 id="library-data">library data</h2>
<p>The data library contains functions for manipulation of lists and dictionaries.</p>
<h3 id="size">size</h3>
<p><code>(any xs) -&gt; long</code></p>
<p>Given a dict or list of <code>xs</code>, returns the collection's size.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<p>Throws an error if <code>xs</code> is neither a <code>dict</code> nor a <code>list</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.size([])
<span class="dv">0</span>

&gt; data.size([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])
<span class="dv">3</span>

&gt; data.size({})
<span class="dv">0</span>

&gt; data.size({<span class="st">:a</span> <span class="st">&quot;foo&quot;</span>, <span class="st">:b</span> <span class="st">&quot;bar&quot;</span>})
<span class="dv">2</span>

&gt; data.size(<span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; data.size(<span class="st">&quot;foo&quot;</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;size is not defined for type string&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="empty">empty?</h3>
<p><code>(any xs) -&gt; boolean</code></p>
<p>Given a dict or list of <code>xs</code>, returns true if the collection is empty, false otherwise.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<p>Throws an error if <code>xs</code> is neither a <code>dict</code> nor a <code>list</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.empty?([])
<span class="dv">true</span>

&gt; data.empty?([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])
<span class="dv">false</span>

&gt; data.empty?({})
<span class="dv">true</span>

&gt; data.empty?({<span class="st">:a</span> <span class="st">&quot;foo&quot;</span>, <span class="st">:b</span> <span class="st">&quot;bar&quot;</span>})
<span class="dv">false</span>

&gt; data.empty?(<span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; data.empty?(<span class="st">&quot;foo&quot;</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;empty? is not defined for type string&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="get">get</h3>
<p><code>(xs, key, not_found) -&gt;</code></p>
<p>Given a dict or list of <code>xs</code>, and a key, returns <code>xs[key]</code> if the key is present in <code>xs</code>.
Returns <code>not_found</code> if <code>key</code> is not present in <code>xs</code>.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>, or <code>key</code> is <code>nil</code>.</p>
<p>Throws an error if <code>xs</code> is neither a <code>dict</code> nor a <code>list</code>.<br />
Throws an error if <code>xs</code> is a <code>list</code> and <code>key</code> cannot be cast to a <code>long</code>.<br />
Throws an error if <code>xs</code> is a <code>dict</code> and <code>key</code> cannot be cast to a <code>string</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.get([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>], <span class="dv">0</span>, <span class="st">&quot;foo&quot;</span>)
<span class="st">&quot;a&quot;</span>

&gt; data.get([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>], <span class="dv">10</span>, <span class="st">&quot;foo&quot;</span>)
<span class="st">&quot;foo&quot;</span>

&gt; data.get({<span class="st">:a</span> <span class="st">&quot;alpha&quot;</span>, <span class="st">:b</span> <span class="st">&quot;beta&quot;</span>}, <span class="st">:a</span>, <span class="st">&quot;default&quot;</span>)
<span class="st">&quot;alpha&quot;</span>

&gt; data.get({<span class="st">:a</span> <span class="st">&quot;alpha&quot;</span>, <span class="st">:b</span> <span class="st">&quot;beta&quot;</span>}, <span class="st">:z</span>, <span class="st">&quot;default&quot;</span>)
<span class="st">&quot;default&quot;</span>

&gt; data.get([], <span class="dv">nil</span>, <span class="st">&quot;foo&quot;</span>)
<span class="dv">nil</span>

&gt; data.get(<span class="dv">nil</span>, <span class="st">:a</span>, <span class="st">&quot;foo&quot;</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="put">put</h3>
<p><code>(xs, key, value) -&gt;</code></p>
<p>Given a dict or list of <code>xs</code>, returns the same type of collection with <code>value</code> placed at <code>key</code>.
If <code>xs</code> is a list, any undefined indexes are filled with <code>nil</code>.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<p>Throws an error if <code>xs</code> is neither a <code>dict</code> nor a <code>list</code>.<br />
Throws an error if <code>key</code> is <code>nil</code>.<br />
Throws an error if <code>xs</code> is a <code>list</code> and <code>key</code> cannot be cast to a <code>long</code> or <code>key</code> is negative.<br />
Throws an error if <code>xs</code> is a <code>dict</code> and <code>key</code> cannot be cast to a <code>string</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.put([], <span class="dv">0</span>, <span class="st">&quot;foo&quot;</span>)
[<span class="st">&quot;foo&quot;</span>]

&gt; data.put([<span class="st">&quot;bar&quot;</span>], <span class="dv">0</span>, <span class="st">&quot;foo&quot;</span>)
[<span class="st">&quot;foo&quot;</span>]

&gt; data.put([<span class="st">&quot;bar&quot;</span>], <span class="dv">1</span>, <span class="st">&quot;foo&quot;</span>)
[<span class="st">&quot;bar&quot;</span>, <span class="st">&quot;foo&quot;</span>]

&gt; data.put([<span class="st">&quot;bar&quot;</span>], <span class="dv">2</span>, <span class="st">&quot;foo&quot;</span>)
[<span class="st">&quot;bar&quot;</span>, <span class="dv">nil</span>, <span class="st">&quot;foo&quot;</span>]

&gt; data.put([<span class="st">&quot;bar&quot;</span>], <span class="dv">10</span>, <span class="st">&quot;foo&quot;</span>)
[<span class="st">&quot;bar&quot;</span>, <span class="dv">nil</span>, <span class="dv">nil</span>, <span class="dv">nil</span>, <span class="dv">nil</span>, <span class="dv">nil</span>, <span class="dv">nil</span>, <span class="dv">nil</span>, <span class="dv">nil</span>, <span class="dv">nil</span>, <span class="st">&quot;foo&quot;</span>]

&gt; data.put({<span class="st">:a</span> <span class="st">&quot;foo&quot;</span>, <span class="st">:b</span> <span class="st">&quot;bar&quot;</span>}, <span class="st">:c</span>, <span class="st">&quot;baz&quot;</span>)
{
  <span class="st">:a</span> <span class="st">&quot;foo&quot;</span>,
  <span class="st">:b</span> <span class="st">&quot;bar&quot;</span>,
  <span class="st">:c</span> <span class="st">&quot;baz&quot;</span>
}

&gt; data.put({<span class="st">:a</span> <span class="st">&quot;foo&quot;</span>, <span class="st">:b</span> <span class="st">&quot;bar&quot;</span>}, <span class="st">:a</span>, <span class="st">&quot;baz&quot;</span>)
{
  <span class="st">:a</span> <span class="st">&quot;baz&quot;</span>,
  <span class="st">:b</span> <span class="st">&quot;bar&quot;</span>
}

&gt; data.put(<span class="dv">nil</span>, <span class="dv">0</span>, <span class="st">&quot;baz&quot;</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="get_in">get_in</h3>
<p><code>(any xs, list keys, any not_found) -&gt;</code></p>
<p>Accesses nested <code>list</code> and <code>dict</code> values in <code>xs</code> using the list of <code>keys</code>. Returns the found value.
Returns <code>not_found</code> if one of the keys is not present.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>, or <code>keys</code> is <code>nil</code>.
Returns <code>xs</code> if <code>keys</code> is empty.</p>
<p>Throws an error if <code>xs</code> or an accessed nested structure is neither a <code>dict</code> nor a <code>list</code>.<br />
Throws an error if <code>xs</code> or an accessed nested structure is a <code>list</code> and the key cannot be cast to a <code>long</code>.<br />
Throws an error if <code>xs</code> or an accessed nested structure is a <code>dict</code> and the key cannot be cast to a <code>string</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.get_in([[<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>], [<span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>], [<span class="st">&quot;e&quot;</span>, <span class="st">&quot;f&quot;</span>]], [<span class="dv">2</span>, <span class="dv">0</span>], <span class="st">&quot;foo&quot;</span>)
<span class="st">&quot;e&quot;</span>

&gt; data.get_in([[<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>], [<span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>], [<span class="st">&quot;e&quot;</span>, <span class="st">&quot;f&quot;</span>]], [<span class="dv">8</span>, <span class="dv">0</span>], <span class="st">&quot;foo&quot;</span>)
<span class="st">&quot;foo&quot;</span>

&gt; data.get_in([{<span class="st">:name</span> <span class="st">&quot;alpha&quot;</span>}, {<span class="st">:name</span> <span class="st">&quot;beta&quot;</span>}, {<span class="st">:name</span> <span class="st">&quot;gamma&quot;</span>}], [<span class="dv">1</span>, <span class="st">:name</span>], <span class="st">&quot;foo&quot;</span>)
<span class="st">&quot;beta&quot;</span>

&gt; data.get_in({<span class="st">:a</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="st">:b</span> [<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>]}, [<span class="st">:b</span> <span class="dv">1</span>], <span class="st">&quot;default&quot;</span>)
<span class="dv">5</span>

&gt; data.get_in([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], [], <span class="st">&quot;foo&quot;</span>)
[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]

&gt; data.get_in(<span class="dv">nil</span>, [<span class="dv">0</span>], <span class="st">&quot;foo&quot;</span>)
<span class="dv">nil</span>

&gt; data.get_in([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="dv">nil</span>, <span class="st">&quot;foo&quot;</span>)
<span class="dv">nil</span>

&gt; data.get_in({<span class="st">:a</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="st">:b</span> [<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>]}, [<span class="st">:b</span> <span class="st">:c</span>], <span class="st">&quot;default&quot;</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;Cannot cast c to long&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="put_in">put_in</h3>
<p><code>(xs, list keys, value) -&gt;</code></p>
<p>Given a dict or list of <code>xs</code>, returns the same type of collection with <code>value</code> placed at the end of navigating
through the list of <code>keys</code>.</p>
<p>If any intermediate structures have to be created, they will be, depending on key type.
String keys create dicts. Long keys create lists.</p>
<p>If a value is placed in a list, any undefined indexes are filled with <code>nil</code>.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<p>Throws an error if <code>xs</code> is neither a <code>dict</code> nor a <code>list</code>.<br />
Throws an error if <code>xs</code> is a <code>dict</code> or a <code>list</code> and <code>keys</code> is <code>nil</code>.<br />
Throws an error if navigating into a <code>list</code> and the key cannot be cast to a <code>long</code> or the key is negative.<br />
Throws an error if navigating into a <code>dict</code> and the key cannot be cast to a <code>string</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">
&gt; \e
data.put_in(
  {
    <span class="st">&quot;1&quot;</span> {<span class="st">:name</span> <span class="st">&quot;adam&quot;</span>},
    <span class="st">&quot;2&quot;</span> {<span class="st">:name</span> <span class="st">&quot;jane&quot;</span>}
  },
  [<span class="dv">2</span>, <span class="st">:name</span>],
  <span class="st">&quot;eve&quot;</span>
)
\e
{
  :<span class="st">`1`</span> {
    <span class="st">:name</span> <span class="st">&quot;adam&quot;</span>
  },
  :<span class="st">`2`</span> {
    <span class="st">:name</span> <span class="st">&quot;eve&quot;</span>
  }
}

&gt; data.put_in([], [<span class="dv">0</span>, <span class="st">:a</span>], <span class="st">&quot;foo&quot;</span>)
[{
  <span class="st">:a</span> <span class="st">&quot;foo&quot;</span>
}]

&gt; data.put_in([], [<span class="dv">0</span>, <span class="st">:a</span>, <span class="dv">2</span>], <span class="st">&quot;foo&quot;</span>)
[{
  <span class="st">:a</span> [<span class="dv">nil</span>, <span class="dv">nil</span>, <span class="st">&quot;foo&quot;</span>]
}]

&gt; data.put_in({}, [<span class="st">:a</span>, <span class="st">:b</span>, <span class="st">:c</span>], <span class="st">&quot;foo&quot;</span>)
{
  <span class="st">:a</span> {
    <span class="st">:b</span> {
      <span class="st">:c</span> <span class="st">&quot;foo&quot;</span>
    }
  }
}

&gt; data.put_in(<span class="dv">nil</span>, [<span class="dv">0</span>], <span class="st">&quot;baz&quot;</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="update">update</h3>
<p><code>(xs, key, function f)</code></p>
<p>Given a dict or list of <code>xs</code>, returns the same type of collection with <code>f(v)</code> placed at <code>key</code>, where <code>v</code> is the original value found at <code>key</code>.
If <code>xs</code> is a list, any undefined indexes are filled with <code>nil</code>.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<p>Throws an error if <code>xs</code> is neither a <code>dict</code> nor a <code>list</code>.<br />
Throws an error if <code>key</code> is <code>nil</code>.<br />
Throws an error if <code>f</code> is <code>nil</code>.<br />
Throws an error if <code>xs</code> is a <code>list</code> and <code>key</code> cannot be cast to a <code>long</code> or <code>key</code> is negative.<br />
Throws an error if <code>xs</code> is a <code>dict</code> and <code>key</code> cannot be cast to a <code>string</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.update([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>], <span class="dv">0</span>, (x) -&gt; x..<span class="st">&quot;-updated&quot;</span>)
[<span class="st">&quot;a-updated&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>]

&gt; data.update([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>], <span class="dv">5</span>, (x) -&gt; <span class="st">&quot;original was: &quot;</span>..x)
[<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="dv">nil</span>, <span class="dv">nil</span>, <span class="st">&quot;original was: nil&quot;</span>]

&gt; data.update({<span class="st">:a</span> <span class="st">&quot;foo&quot;</span>, <span class="st">:b</span> <span class="st">&quot;bar&quot;</span>}, <span class="st">:a</span>, (x) -&gt; <span class="st">&quot;Mr. &quot;</span>..x)
{
  <span class="st">:a</span> <span class="st">&quot;Mr. foo&quot;</span>,
  <span class="st">:b</span> <span class="st">&quot;bar&quot;</span>
}

&gt; data.update(<span class="dv">nil</span>, <span class="dv">0</span>, (x) -&gt; x)
<span class="dv">nil</span></code></pre></div>
<h3 id="update_in">update_in</h3>
<p><code>(xs, list keys, function f) -&gt;</code></p>
<p>Given a dict or list of <code>xs</code>, returns the same type of collection with <code>f(v)</code> placed at the end of navigating
through the list of <code>keys</code>, where <code>v</code> is the value originally found.</p>
<p>If any intermediate structures have to be created, they will be, depending on key type.
String keys create dicts. Long keys create lists.</p>
<p>If a value is placed in a list, any undefined indexes are filled with <code>nil</code>.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<p>Throws an error if <code>xs</code> is neither a <code>dict</code> nor a <code>list</code>.<br />
Throws an error if <code>xs</code> is a <code>dict</code> or a <code>list</code> and <code>keys</code> is <code>nil</code>.<br />
Throws an error if <code>f</code> is <code>nil</code>.<br />
Throws an error if navigating into a <code>list</code> and the key cannot be cast to a <code>long</code> or the key is negative.<br />
Throws an error if navigating into a <code>dict</code> and the key cannot be cast to a <code>string</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">
&gt; \e
data.update_in(
  {
    <span class="st">&quot;1&quot;</span> {<span class="st">:name</span> <span class="st">&quot;adam&quot;</span>},
    <span class="st">&quot;2&quot;</span> {<span class="st">:name</span> <span class="st">&quot;jane&quot;</span>}
  },
  [<span class="dv">2</span>, <span class="st">:name</span>],
  (x) -&gt; <span class="st">&quot;miss &quot;</span>..x
)
\e
{
  :<span class="st">`1`</span> {
    <span class="st">:name</span> <span class="st">&quot;adam&quot;</span>
  },
  :<span class="st">`2`</span> {
    <span class="st">:name</span> <span class="st">&quot;miss jane&quot;</span>
  }
}

&gt; data.update_in([], [<span class="dv">0</span>, <span class="st">:a</span>], (x) -&gt; <span class="st">&quot;updated: &quot;</span>..x)
[{
  <span class="st">:a</span> <span class="st">&quot;updated: nil&quot;</span>
}]

&gt; data.update_in({<span class="st">:even</span> [<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>], <span class="st">:odd</span> [<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>]}, [<span class="st">:even</span>, <span class="dv">3</span>], (x) -&gt; x*<span class="dv">2</span>)
{
  <span class="st">:odd</span> [<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>],
  <span class="st">:even</span> [<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">12</span>]
}

&gt; data.update_in(<span class="dv">nil</span>, [<span class="dv">0</span>], (x) -&gt; x<span class="dv">+1</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="keys">keys</h3>
<p><code>(xs) -&gt; list</code></p>
<p>Given a <code>list</code> or <code>dict</code> of <code>xs</code>, returns a list of keys present in the structure.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<p>Throws an error if <code>xs</code> is neither a <code>list</code> nor a <code>dict</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.keys([])
[]

&gt; data.keys([<span class="st">&quot;a&quot;</span>, <span class="dv">nil</span>, <span class="st">&quot;c&quot;</span>])
[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>]

&gt; data.keys({})
[]

&gt; data.keys({<span class="st">:a</span> <span class="st">&quot;foo&quot;</span>, <span class="st">:b</span> <span class="st">&quot;bar&quot;</span>})
[<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>]

&gt; data.keys(<span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; data.keys(<span class="st">&quot;foo&quot;</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;keys is not defined for type string&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="has">has?</h3>
<p><code>(xs, key) -&gt; boolean</code></p>
<p>Returns <code>true</code> if <code>key</code> is a key in <code>xs</code>, false otherwise.
If <code>xs</code> is a <code>list</code>, <code>key</code> is cast to a <code>long</code>.
If <code>xs</code> is a <code>dict</code>, <code>key</code> is cast to a <code>string</code>.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<p>Throws an error if <code>xs</code> is neither a <code>list</code>, nor a <code>dict</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.has?([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>], <span class="dv">2</span>)
<span class="dv">true</span>

&gt; data.has?([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>], <span class="dv">3</span>)
<span class="dv">false</span>

&gt; data.has?([<span class="dv">nil</span>, <span class="dv">nil</span>, <span class="dv">nil</span>], <span class="dv">1</span>)
<span class="dv">true</span>

&gt; data.has?({<span class="st">:a</span> <span class="st">&quot;foo&quot;</span>, <span class="st">:b</span> <span class="st">&quot;bar&quot;</span>}, <span class="st">:a</span>)
<span class="dv">true</span>

&gt; data.has?({<span class="st">:a</span> <span class="st">&quot;foo&quot;</span>, <span class="st">:b</span> <span class="st">&quot;bar&quot;</span>}, <span class="st">:c</span>)
<span class="dv">false</span>

&gt; data.has?({<span class="st">:a</span> <span class="st">&quot;foo&quot;</span>, <span class="st">:b</span> <span class="st">&quot;bar&quot;</span>, <span class="st">:c</span> <span class="dv">nil</span>}, <span class="st">:c</span>)
<span class="dv">true</span>

&gt; data.has?(<span class="st">&quot;foo&quot;</span>, <span class="dv">1</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;has? is not defined for type string&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}

&gt; data.has?(<span class="st">&quot;foo&quot;</span> as list, <span class="dv">1</span>)
<span class="dv">true</span></code></pre></div>
<h3 id="values">values</h3>
<p><code>(xs) -&gt; list</code></p>
<p>Given a <code>list</code> or <code>dict</code> of <code>xs</code>, returns a list of values present in the structure.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<p>Throws an error if <code>xs</code> is neither a <code>list</code> nor a <code>dict</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.values([])
[]

&gt; data.values([<span class="st">&quot;a&quot;</span>, <span class="dv">nil</span>, <span class="st">&quot;c&quot;</span>])
[<span class="st">&quot;a&quot;</span>, <span class="dv">nil</span>, <span class="st">&quot;c&quot;</span>]

&gt; data.values({})
[]

&gt; data.values({<span class="st">:a</span> <span class="st">&quot;foo&quot;</span>, <span class="st">:b</span> <span class="st">&quot;bar&quot;</span>})
[<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span>]

&gt; data.values(<span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; data.values(<span class="st">&quot;foo&quot;</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;values is not defined for type string&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
}</code></pre></div>
<h3 id="entries">entries</h3>
<p><code>(dict xs) -&gt; list</code></p>
<p>Returns a <code>list</code> where each element is a <code>dict</code>. For each key <code>k</code> in <code>xs</code> there is a correpsonding element <code>{:key k, :value xs[k]}</code> in the <code>list</code>.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.entries({})
[]

&gt; data.entries({<span class="st">:foo</span> <span class="st">&quot;bar&quot;</span>})
[{
  <span class="st">:value</span> <span class="st">&quot;bar&quot;</span>,
  <span class="st">:key</span> <span class="st">&quot;foo&quot;</span>
}]

&gt; data.entries({<span class="st">:a</span> <span class="dv">1</span>, <span class="st">:b</span> <span class="dv">2</span>})
[{
  <span class="st">:value</span> <span class="dv">1</span>,
  <span class="st">:key</span> <span class="st">&quot;a&quot;</span>
}, {
  <span class="st">:value</span> <span class="dv">2</span>,
  <span class="st">:key</span> <span class="st">&quot;b&quot;</span>
}]

&gt; data.entries(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="prepend">prepend</h3>
<p><code>(x, list xs) -&gt; list</code></p>
<p>Returns a list consisting of <code>x</code> followed by all elements of <code>xs</code>.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.prepend(<span class="st">&quot;a&quot;</span>, [<span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>])
[<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>]

&gt; data.prepend(<span class="st">&quot;a&quot;</span>, [])
[<span class="st">&quot;a&quot;</span>]

&gt; data.prepend(<span class="st">&quot;a&quot;</span>, <span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="append">append</h3>
<p><code>(list xs, x) -&gt; list</code></p>
<p>Returns a list consisting of all elements of <code>xs</code> followed by <code>x</code>.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.append([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>], <span class="st">&quot;c&quot;</span>)
[<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>]

&gt; data.append([], <span class="st">&quot;a&quot;</span>)
[<span class="st">&quot;a&quot;</span>]

&gt; data.append(<span class="dv">nil</span>, <span class="st">&quot;a&quot;</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="find">find</h3>
<p><code>(list xs, function p) -&gt;</code></p>
<p>Tests each <code>x</code> in <code>xs</code> in order by passing them to predicate function <code>p</code>.</p>
<p>If <code>p</code> accepts a single argument, <code>p(x)</code> is evaluated.
If <code>p</code> accepts two arguments, <code>p(x, i)</code> is evaluated, where <code>i</code> is the index of <code>x</code> in <code>xs</code>.</p>
<p>Returns the first <code>x</code> for which <code>p</code> evaluates to a value that casts to <code>boolean</code> <code>true</code>.</p>
<p>Returns <code>nil</code> if there is no <code>x</code> in <code>xs</code> such that <code>p</code> evaluates to a value that casts to <code>boolean</code> <code>true</code>.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<p>Throws an error if <code>p</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.find([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>], (x) -&gt; x &gt;= <span class="dv">3</span>)
<span class="dv">3</span>

<span class="co"># find first even number on an even index</span>
&gt; data.find([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">7</span>, <span class="dv">6</span>, <span class="dv">5</span>, <span class="dv">3</span>], (x, i) -&gt; (i % <span class="dv">2</span> == <span class="dv">0</span>) &amp;&amp; (x % <span class="dv">2</span> == <span class="dv">0</span>))
<span class="dv">6</span>

&gt; data.find([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>], (x) -&gt; x &gt;= <span class="dv">10</span>)
<span class="dv">nil</span>

&gt; data.find(<span class="dv">nil</span>, (x) -&gt; <span class="dv">true</span>)
<span class="dv">nil</span>

&gt; data.find([], <span class="dv">nil</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;predicate function cannot be nil&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;NIL_ERROR&quot;</span>,
  ...
}</code></pre></div>
<h3 id="find_index">find_index</h3>
<p><code>(list xs, function p) -&gt; long</code></p>
<p>Tests each <code>x</code> in <code>xs</code> in order by passing them to predicate function <code>p</code>.</p>
<p>If <code>p</code> accepts a single argument, <code>p(x)</code> is evaluated.
If <code>p</code> accepts two arguments, <code>p(x, i)</code> is evaluated, where <code>i</code> is the index of <code>x</code> in <code>xs</code>.</p>
<p>Returns the first index for which <code>p</code> evaluates to a value that casts to <code>boolean</code> <code>true</code>.</p>
<p>Returns <code>nil</code> if there is no <code>x</code> in <code>xs</code> such that <code>p</code> evaluates to a value that casts to <code>boolean</code> <code>true</code>.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<p>Throws an error if <code>p</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.find_index([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>], (x) -&gt; x &gt;= <span class="dv">3</span>)
<span class="dv">2</span>

<span class="co"># find index of first even number on an even index</span>
&gt; data.find_index([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">7</span>, <span class="dv">6</span>, <span class="dv">5</span>, <span class="dv">3</span>], (x, i) -&gt; (i % <span class="dv">2</span> == <span class="dv">0</span>) &amp;&amp; (x % <span class="dv">2</span> == <span class="dv">0</span>))
<span class="dv">4</span>

&gt; data.find_index([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>], (x) -&gt; x &gt;= <span class="dv">10</span>)
<span class="dv">nil</span>

&gt; data.find_index(<span class="dv">nil</span>, (x) -&gt; <span class="dv">true</span>)
<span class="dv">nil</span>

&gt; data.find_index([], <span class="dv">nil</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;predicate function cannot be nil&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;NIL_ERROR&quot;</span>,
  ...
}</code></pre></div>
<h3 id="insert">insert</h3>
<p><code>(list xs, long i, v) -&gt;</code></p>
<p>Returns a list consisting of all elements of <code>xs</code>, with elements starting at index <code>i</code> shifted to the right, and <code>v</code> inserted at position <code>i</code>.
If <code>i</code> is bigger than the largest index in <code>xs</code>, any intermediate indexes are created with value <code>nil</code>.</p>
<p>Returns <code>nil</code> if <code>xs</code> is nil.</p>
<p>Throws an error if index is negative or <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.insert([], <span class="dv">0</span>, <span class="st">&quot;a&quot;</span>)
[<span class="st">&quot;a&quot;</span>]

&gt; data.insert([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;d&quot;</span>], <span class="dv">2</span>, <span class="st">&quot;c&quot;</span>)
[<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>]

&gt; data.insert([], <span class="dv">3</span>, <span class="st">&quot;a&quot;</span>)
[<span class="dv">nil</span>, <span class="dv">nil</span>, <span class="dv">nil</span>, <span class="st">&quot;a&quot;</span>]

&gt; data.insert(<span class="dv">nil</span>, <span class="dv">0</span>, <span class="st">&quot;a&quot;</span>)
<span class="dv">nil</span>

&gt; data.insert([], -<span class="dv">2</span>, <span class="st">&quot;a&quot;</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;cannot insert at index -2&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;INDEX_OUT_OF_BOUNDS&quot;</span>,
  ...
}

&gt; data.insert([], <span class="dv">nil</span>, <span class="st">&quot;a&quot;</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;cannot insert at nil index&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;NIL_ERROR&quot;</span>,
  ...
}</code></pre></div>
<h3 id="delete">delete</h3>
<p><code>(xs, key) -&gt;</code></p>
<p>Given a <code>list</code> or <code>dict</code> <code>xs</code>, returns a collection of the same time consisting of all elements of <code>xs</code>, except for the element at <code>key</code>.
If <code>xs</code> is a list, any elements past the deleted index are shifted to the left.</p>
<p>If <code>xs</code> does not have the given <code>key</code>, <code>xs</code> is returned.</p>
<p>Returns <code>nil</code> if <code>xs</code> is nil.<br />
Returns <code>xs</code> if <code>key</code> is <code>nil</code>.</p>
<p>Throws an error if <code>xs</code> is a list and <code>key</code> cannot be cast to a <code>long</code>.<br />
Throws an error if <code>xs</code> is a dict and <code>key</code> cannot be cast to a <code>string</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.delete([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>], <span class="dv">0</span>)
[<span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>]

&gt; data.delete([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>], <span class="dv">1</span>)
[<span class="st">&quot;a&quot;</span>, <span class="st">&quot;c&quot;</span>]

&gt; data.delete([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>], <span class="dv">10</span>)
[<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>]

&gt; data.delete({<span class="st">:a</span> <span class="st">&quot;1&quot;</span>, <span class="st">:b</span> <span class="st">&quot;2&quot;</span>}, <span class="st">:a</span>)
{
  <span class="st">:b</span> <span class="st">&quot;2&quot;</span>
}

&gt; data.delete(<span class="dv">nil</span>, <span class="dv">0</span>)
<span class="dv">nil</span>

&gt; data.delete([<span class="dv">0</span>, <span class="dv">1</span>], <span class="dv">nil</span>)
[<span class="dv">0</span>, <span class="dv">1</span>]

&gt; data.delete([], -<span class="dv">2</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;cannot delete at index -2&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;INDEX_OUT_OF_BOUNDS&quot;</span>,
  ...
}</code></pre></div>
<h3 id="select">select</h3>
<p><code>(xs, list keys, not_found) -&gt;</code></p>
<p>Given a <code>list</code> or <code>dict</code> <code>xs</code>, returns a collection of the same type, with elements at all <code>keys</code> from <code>xs</code>.
If <code>xs</code> does not have any of the <code>keys</code>, <code>not_found</code> is included in the result instead.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code> or <code>keys</code> is <code>nil</code>.</p>
<p>Throws an error if <code>xs</code> is a <code>list</code> and a <code>key</code> cannot be cast to <code>long</code>.<br />
Throws an error if <code>xs</code> is a <code>dict</code> and a <code>key</code> cannot be cast to <code>string</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.select([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>], [<span class="dv">0</span>, <span class="dv">2</span>])
[<span class="st">&quot;a&quot;</span>, <span class="st">&quot;c&quot;</span>]

&gt; data.select([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>], [<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">10</span>])
[<span class="st">&quot;a&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="dv">nil</span>]

&gt; data.select([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>], [<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">10</span>], <span class="st">&quot;z&quot;</span>)
[<span class="st">&quot;a&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;z&quot;</span>]

&gt; data.select({<span class="st">:a</span> <span class="st">&quot;1&quot;</span>, <span class="st">:b</span> <span class="st">&quot;2&quot;</span>, <span class="st">:c</span> <span class="st">&quot;3&quot;</span>}, [<span class="st">:a</span>, <span class="st">:c</span>, <span class="st">:d</span>], <span class="st">&quot;0&quot;</span>)
{
  <span class="st">:a</span> <span class="st">&quot;1&quot;</span>,
  <span class="st">:c</span> <span class="st">&quot;3&quot;</span>,
  <span class="st">:d</span> <span class="st">&quot;0&quot;</span>
}

&gt; data.select(<span class="dv">nil</span>, [<span class="dv">0</span>, <span class="dv">1</span>])
<span class="dv">nil</span>

&gt; data.select([<span class="dv">0</span>, <span class="dv">1</span>], <span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="filter">filter</h3>
<p><code>(xs, function p) -&gt;</code></p>
<p>Given a <code>list</code> or <code>dict</code> <code>xs</code>, returns a collection of the same type,
with all elements for which predicate function <code>p</code> returns a value that casts to <code>boolean</code> <code>true</code>.</p>
<p>If <code>p</code> accepts one argument, <code>x</code> is passed. If <code>p</code> accepts two arguments, <code>x</code> and the key or index of <code>x</code> in <code>xs</code> is passed.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<p>Throws an error if <code>xs</code> is neither a <code>list</code> nor a <code>dict</code>.<br />
Throws an error if <code>p</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.filter([<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>], (x) -&gt; x % <span class="dv">2</span> == <span class="dv">0</span>)
[<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>]

&gt; data.filter([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;g&quot;</span>], (x, i) -&gt; i % <span class="dv">2</span> == <span class="dv">0</span>)
[<span class="st">&quot;a&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;g&quot;</span>]

&gt; data.filter({<span class="st">:a</span> <span class="dv">1</span>, <span class="st">:b</span> <span class="dv">2</span>, <span class="st">:c</span> <span class="dv">3</span>, <span class="st">:d</span> <span class="dv">4</span>, <span class="st">:e</span> <span class="dv">5</span>, <span class="st">:f</span> <span class="dv">6</span>}, (x) -&gt; x % <span class="dv">3</span> == <span class="dv">0</span>)
{
  <span class="st">:c</span> <span class="dv">3</span>,
  <span class="st">:f</span> <span class="dv">6</span>
}

&gt; data.filter({<span class="st">:a</span> <span class="dv">1</span>, <span class="st">:b</span> <span class="dv">2</span>, <span class="st">:c</span> <span class="dv">3</span>, <span class="st">:d</span> <span class="dv">4</span>, <span class="st">:e</span> <span class="dv">5</span>, <span class="st">:f</span> <span class="dv">6</span>}, (x, k) -&gt; k == <span class="st">&quot;d&quot;</span> || x % <span class="dv">3</span> == <span class="dv">0</span>)
{
  <span class="st">:c</span> <span class="dv">3</span>,
  <span class="st">:d</span> <span class="dv">4</span>,
  <span class="st">:f</span> <span class="dv">6</span>
}

&gt; data.filter(<span class="dv">nil</span>, (x) -&gt; <span class="dv">true</span>)
<span class="dv">nil</span>

&gt; data.filter([], <span class="dv">nil</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;predicate function cannot be nil&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;NIL_ERROR&quot;</span>,
  ...
}

&gt; data.filter(<span class="dv">1</span>, (x) -&gt; <span class="dv">true</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;filter is not defined for type long&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="shuffle">shuffle</h3>
<p><code>(list xs, seed) -&gt; list</code></p>
<p>Returns a list with all elements of <code>xs</code> in random order. The reordering of items is based on <code>seed</code>.
The same seed will shuffle lists of equal length in the same way.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.shuffle([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>], <span class="st">&quot;hello&quot;</span>)
[<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">6</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">3</span>]

&gt; data.shuffle([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;f&quot;</span>], <span class="st">&quot;hello&quot;</span>)
[<span class="st">&quot;e&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;c&quot;</span>]

&gt; data.shuffle([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>], <span class="st">&quot;foo&quot;</span>)
[<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">6</span>]

&gt; data.shuffle([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;f&quot;</span>], <span class="st">&quot;foo&quot;</span>)
[<span class="st">&quot;a&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;f&quot;</span>]

&gt; data.shuffle(<span class="dv">nil</span>, <span class="st">&quot;seed&quot;</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="unique">unique</h3>
<p><code>(list xs) -&gt; list</code></p>
<p>Returns a list with all duplicates in <code>xs</code> removed. Values are considered duplicates when they compare as equal.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.unique([<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>])
[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]

&gt; data.unique([<span class="fl">1.0</span>, <span class="dv">1</span>, <span class="fl">2.0</span>, <span class="dv">2</span>, <span class="fl">3.0</span>, <span class="dv">3</span>])
[<span class="fl">1.0</span>, <span class="fl">2.0</span>, <span class="fl">3.0</span>]

&gt; data.unique([<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span>, <span class="st">&quot;foo&quot;</span>])
[<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span>]

&gt; data.unique([{<span class="st">:a</span> <span class="st">&quot;a&quot;</span>, <span class="st">:b</span> <span class="st">&quot;b&quot;</span>}, {<span class="st">:b</span> <span class="st">&quot;b&quot;</span>, <span class="st">:a</span> <span class="st">&quot;a&quot;</span>}])
[{
  <span class="st">:a</span> <span class="st">&quot;a&quot;</span>,
  <span class="st">:b</span> <span class="st">&quot;b&quot;</span>
}]

&gt; data.unique(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="range">range</h3>
<p><code>(long from=0, long to=0) -&gt; list</code></p>
<p>Returns a list with long values starting at <code>from</code>, and ending at <code>to</code>.</p>
<p>Returns an empty list if <code>from &gt; to</code>.</p>
<p>Returns <code>nil</code> if <code>from</code> is <code>nil</code> or <code>to</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.range(<span class="dv">0</span>, <span class="dv">2</span>)
[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>]

&gt; data.range(-<span class="dv">3</span>, <span class="dv">3</span>)
[-<span class="dv">3</span>, -<span class="dv">2</span>, -<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]

&gt; data.range(<span class="dv">1</span>, <span class="dv">1</span>)
[<span class="dv">1</span>]

&gt; data.range(<span class="dv">10</span>, <span class="dv">1</span>)
[]

&gt; data.range(<span class="dv">nil</span>, <span class="dv">0</span>)
<span class="dv">nil</span>

&gt; data.range(<span class="dv">0</span>, <span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="any">any?</h3>
<p><code>(list xs, function p) -&gt; boolean</code></p>
<p>Tests items <code>x</code> in <code>xs</code> with predicate function <code>p</code>. If <code>p</code> accepts one argument, <code>x</code> is passed. If <code>p</code> accepts
two arguments, <code>x</code> and the index of <code>x</code> in <code>xs</code> are passed.</p>
<p>Returns true if <code>p</code> returns a value that casts to boolean <code>true</code> for any <code>x</code> in <code>xs</code>.
Returns false otherwise.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<p>Throws an error if <code>p</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.any?([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>], (x) -&gt; x % <span class="dv">2</span> == <span class="dv">0</span>)
<span class="dv">true</span>

&gt; data.any?([<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>], (x) -&gt; x % <span class="dv">2</span> == <span class="dv">0</span>)
<span class="dv">false</span>

&gt; data.any?([<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>], (x, i) -&gt; x == i)
<span class="dv">false</span>

&gt; data.any?([<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">2</span>], (x, i) -&gt; x == i)
<span class="dv">true</span>

&gt; data.any?([], (x) -&gt; <span class="dv">true</span>)
<span class="dv">false</span>

&gt; data.any?(<span class="dv">nil</span>, (x) -&gt; <span class="dv">true</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="none">none?</h3>
<p><code>(list xs, function p) -&gt; boolean</code></p>
<p>Tests items <code>x</code> in <code>xs</code> with predicate function <code>p</code>. If <code>p</code> accepts one argument, <code>x</code> is passed. If <code>p</code> accepts
two arguments, <code>x</code> and the index of <code>x</code> in <code>xs</code> are passed.</p>
<p>Returns false if <code>p</code> returns a value that casts to boolean <code>true</code> for any <code>x</code> in <code>xs</code>.
Returns true otherwise.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<p>Throws an error if <code>p</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.none?([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>], (x) -&gt; x % <span class="dv">2</span> == <span class="dv">0</span>)
<span class="dv">false</span>

&gt; data.none?([<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>], (x) -&gt; x % <span class="dv">2</span> == <span class="dv">0</span>)
<span class="dv">true</span>

&gt; data.none?([<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>], (x, i) -&gt; x == i)
<span class="dv">true</span>

&gt; data.none?([<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">2</span>], (x, i) -&gt; x == i)
<span class="dv">false</span>

&gt; data.none?([], (x) -&gt; <span class="dv">true</span>)
<span class="dv">true</span>

&gt; data.none?(<span class="dv">nil</span>, (x) -&gt; <span class="dv">true</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="all">all?</h3>
<p><code>(list xs, function p) -&gt; boolean</code></p>
<p>Tests items <code>x</code> in <code>xs</code> with predicate function <code>p</code>. If <code>p</code> accepts one argument, <code>x</code> is passed. If <code>p</code> accepts
two arguments, <code>x</code> and the index of <code>x</code> in <code>xs</code> are passed.</p>
<p>Returns true if <code>p</code> returns a value that casts to boolean <code>true</code> for all <code>x</code> in <code>xs</code>.
Returns true if <code>xs</code> is empty.</p>
<p>Returns false otherwise.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<p>Throws an error if <code>p</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.all?([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>], (x) -&gt; x % <span class="dv">2</span> == <span class="dv">0</span>)
<span class="dv">false</span>

&gt; data.all?([<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>], (x) -&gt; x % <span class="dv">2</span> == <span class="dv">0</span>)
<span class="dv">true</span>

&gt; data.all?([<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>], (x, i) -&gt; x == i)
<span class="dv">false</span>

&gt; data.all?([<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>], (x, i) -&gt; x == i)
<span class="dv">true</span>

&gt; data.all?([], (x) -&gt; <span class="dv">false</span>)
<span class="dv">true</span>

&gt; data.all?(<span class="dv">nil</span>, (x) -&gt; <span class="dv">false</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="init">init</h3>
<p><code>(list xs) -&gt; list</code></p>
<p>Returns a list containing all elements of <code>xs</code> with the exception of the last one.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<p>Throws an error if <code>xs</code> is empty.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.init([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])
[<span class="dv">1</span>, <span class="dv">2</span>]

&gt; data.init(<span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; data.init([])
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;list must not be empty&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="tail">tail</h3>
<p><code>(list xs) -&gt; list</code></p>
<p>Returns a list containing all elements of <code>xs</code> with the exception of the first one.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<p>Throws an error if <code>xs</code> is empty.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.tail([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])
[<span class="dv">2</span>, <span class="dv">3</span>]

&gt; data.tail(<span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; data.tail([])
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;list must not be empty&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="head">head</h3>
<p><code>(list xs) -&gt; any</code></p>
<p>Returns the first element in <code>xs</code>.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<p>Throws an error if <code>xs</code> is empty.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.head([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])
<span class="dv">1</span>

&gt; data.head(<span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; data.head([])
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;list must not be empty&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="last">last</h3>
<p><code>(list xs) -&gt; any</code></p>
<p>Returns the last element in <code>xs</code>.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<p>Throws an error if <code>xs</code> is empty.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.last([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])
<span class="dv">3</span>

&gt; data.last(<span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; data.last([])
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;list must not be empty&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="slice">slice</h3>
<p><code>(list xs, long start=0, long end=nil) -&gt; list</code></p>
<p>Returns a sublist of <code>xs</code> starting at index <code>start</code> inclusively, and extending to index <code>end</code> exclusively.
If <code>end</code> is <code>nil</code>, the sublist extends to the end of <code>xs</code>.</p>
<p>Returns an empty list if <code>start</code> is greater than the last index in <code>xs</code>.
Returns an empty list if <code>start &gt;= end</code>.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<p>Throws an error if <code>start</code> is <code>nil</code> or <code>start &lt; 0</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.slice([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>], <span class="dv">3</span>)
[<span class="dv">4</span>, <span class="dv">5</span>]

&gt; data.slice([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>], <span class="dv">1</span>, <span class="dv">4</span>)
[<span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>]

&gt; data.slice([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>], <span class="dv">10</span>, <span class="dv">20</span>)
[]

&gt; data.slice([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="dv">1</span>, <span class="dv">1</span>)
[]

&gt; data.slice(<span class="dv">nil</span>, <span class="dv">0</span>, <span class="dv">1</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="reverse">reverse</h3>
<p><code>(list xs) -&gt; list</code></p>
<p>Returns a list that contains all elements of <code>xs</code> in reverse order.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.reverse([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])
[<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>]

&gt; data.reverse(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="sort">sort</h3>
<p><code>(list xs, function f) -&gt; list</code></p>
<p>Returns a list sorted according to comparator function f. The sorting algorithm is guaranteed to be stable.</p>
<p>The comparator function accepts two arguments: a and b.<br />
If a &lt; b, f returns a negative number.<br />
If a &gt; b, f returns a positive number.<br />
If a == b, f returns 0.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.sort([<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">7</span>], math.compare)
[<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>]

<span class="co"># sorts numbers by numeric value</span>
&gt; data.sort([<span class="dv">110</span>, <span class="dv">221</span>, <span class="dv">12</span>, <span class="dv">121</span>, <span class="dv">222</span>, <span class="dv">33</span>], math.compare)
[<span class="dv">12</span>, <span class="dv">33</span>, <span class="dv">110</span>, <span class="dv">121</span>, <span class="dv">221</span>, <span class="dv">222</span>]

<span class="co"># sorts numbers as strings</span>
&gt; data.sort([<span class="dv">12</span>, <span class="dv">33</span>, <span class="dv">110</span>, <span class="dv">121</span>, <span class="dv">221</span>, <span class="dv">222</span>], strings.comparator())
[<span class="dv">110</span>, <span class="dv">12</span>, <span class="dv">121</span>, <span class="dv">221</span>, <span class="dv">222</span>, <span class="dv">33</span>]

<span class="co"># sorts records by id</span>
&gt; data.sort([{<span class="st">:id</span> <span class="dv">872</span>, <span class="st">:name</span> <span class="st">&quot;foo&quot;</span>}, {<span class="st">:id</span> <span class="dv">261</span>, <span class="st">:name</span> <span class="st">&quot;bar&quot;</span>}], (a, b) -&gt; math.compare(a[<span class="st">:id</span>], b[<span class="st">:id</span>]))
[{
  <span class="st">:name</span> <span class="st">&quot;bar&quot;</span>,
  <span class="st">:id</span> <span class="dv">261</span>
}, {
  <span class="st">:name</span> <span class="st">&quot;foo&quot;</span>,
  <span class="st">:id</span> <span class="dv">872</span>
}]</code></pre></div>
<h3 id="repeat">repeat</h3>
<p><code>(long n, x) -&gt; list</code></p>
<p>Returns a list of length <code>n</code> that contains <code>x</code> in every position.</p>
<p>Returns <code>nil</code> if <code>n</code> is <code>nil</code>.</p>
<p>Throws an error if <code>n</code> is negative.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.repeat(<span class="dv">3</span>, <span class="st">&quot;foo&quot;</span>)
[<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;foo&quot;</span>, <span class="st">&quot;foo&quot;</span>]

&gt; data.repeat(<span class="dv">0</span>, <span class="st">&quot;foo&quot;</span>)
[]

&gt; data.repeat(<span class="dv">nil</span>, <span class="st">&quot;foo&quot;</span>)
<span class="dv">nil</span>

&gt; data.repeat(-<span class="dv">2</span>, <span class="st">&quot;foo&quot;</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;Cannot repeat -2 times&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;INDEX_OUT_OF_BOUNDS&quot;</span>,
  ...
}</code></pre></div>
<h3 id="concat-1">concat</h3>
<p><code>(list lists) -&gt; list</code></p>
<p>Returns a list that contains all elements of all <code>lists</code>. Lists are concatenated in given order.</p>
<p>Returns <code>nil</code> if <code>lists</code> is <code>nil</code>.<br />
Returns <code>nil</code> if any element of <code>lists</code> is <code>nil</code>.</p>
<p>Throws an error if any element of <code>lists</code> is not a <code>list</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.concat([[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], [<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>], [<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>]])
[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>]

&gt; data.concat([[<span class="dv">1</span>,<span class="dv">nil</span>,<span class="dv">3</span>], [<span class="dv">nil</span>,<span class="dv">5</span>,<span class="dv">6</span>], [<span class="dv">7</span>,<span class="dv">nil</span>,<span class="dv">nil</span>]])
[<span class="dv">1</span>, <span class="dv">nil</span>, <span class="dv">3</span>, <span class="dv">nil</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">nil</span>, <span class="dv">nil</span>]

&gt; data.concat([[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="dv">nil</span>, [<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>]])
<span class="dv">nil</span>

&gt; data.concat(<span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; data.concat([<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span>])
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;cannot concat type string&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="merge">merge</h3>
<p><code>(list dicts) -&gt; dict</code></p>
<p>Returns a <code>dict</code> that contains all entries from all given <code>dicts</code>. Dicts are merged left to right.
In case of duplicate keys across <code>dicts</code>, the rightmost occurrence takes precedence.</p>
<p>Returns <code>nil</code> if <code>dicts</code> is <code>nil</code>.<br />
Returns <code>nil</code> if any element of <code>dicts</code> is <code>nil</code>.</p>
<p>Throws an error if any element of <code>dicts</code> is not a <code>dict</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.merge([{<span class="st">:a</span> <span class="dv">1</span>}, {<span class="st">:b</span> <span class="dv">2</span>}, {<span class="st">:c</span> <span class="dv">3</span>}])
{
  <span class="st">:a</span> <span class="dv">1</span>,
  <span class="st">:b</span> <span class="dv">2</span>,
  <span class="st">:c</span> <span class="dv">3</span>
}

&gt; data.merge([{<span class="st">:a</span> <span class="dv">1</span>}, {<span class="st">:b</span> <span class="dv">2</span>}, {<span class="st">:a</span> <span class="dv">99</span>}])
{
  <span class="st">:a</span> <span class="dv">99</span>,
  <span class="st">:b</span> <span class="dv">2</span>
}

&gt; data.merge([{<span class="st">:a</span> <span class="dv">1</span>}, <span class="dv">nil</span>])
<span class="dv">nil</span>

&gt; data.merge(<span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; data.merge([<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span>])
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;cannot merge type string&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="take">take</h3>
<p><code>(long n, list xs) -&gt; list</code></p>
<p>Returns a list containing the first <code>n</code> elements of <code>xs</code>.
Returns <code>xs</code> if <code>n</code> is greater than the size of <code>xs</code>.
Returns an empty list if <code>n</code> is negative.</p>
<p>Returns <code>nil</code> if <code>n</code> is <code>nil</code> or <code>xs</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.take(<span class="dv">2</span>, [<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>])
[<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>]

&gt; data.take(<span class="dv">10</span>, [<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>])
[<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>]

&gt; data.take(<span class="dv">0</span>, [<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>])
[]

&gt; data.take(-<span class="dv">1</span>, [<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>])
[]

&gt; data.take(<span class="dv">1</span>, <span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; data.take(<span class="dv">nil</span>, [<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>])
<span class="dv">nil</span></code></pre></div>
<h3 id="take_while">take_while</h3>
<p><code>(function p, list xs) -&gt; list</code></p>
<p>Returns a list containing leading elements <code>x</code> of <code>xs</code> for which <code>p(x)</code> casts to <code>boolean</code> <code>true</code>.</p>
<p>Returns <code>nil</code> if <code>p</code> is <code>nil</code> or <code>xs</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">
&gt; data.take_while((x) -&gt; x &lt; <span class="dv">5</span>, [<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">2</span>])
[<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">2</span>]

&gt; data.take_while((x) -&gt; x % <span class="dv">2</span> == <span class="dv">0</span>, [<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>])
[<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>]

&gt; data.take_while((x) -&gt; x % <span class="dv">2</span> == <span class="dv">0</span>, [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>])
[]

&gt; data.take_while(<span class="dv">nil</span>, [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])
<span class="dv">nil</span>

&gt; data.take_while((x) -&gt; <span class="dv">true</span>, <span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="take_until">take_until</h3>
<p><code>(function p, list xs) -&gt; list</code></p>
<p>Returns a list containing leading elements <code>x</code> of <code>xs</code> for which <code>p(x)</code> casts to <code>boolean</code> <code>false</code>.</p>
<p>Returns <code>nil</code> if <code>p</code> is <code>nil</code> or <code>xs</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">
&gt; data.take_until((x) -&gt; x &gt;= <span class="dv">5</span>, [<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">2</span>])
[<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">2</span>]

&gt; data.take_until((x) -&gt; x % <span class="dv">2</span> != <span class="dv">0</span>, [<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>])
[<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>]

&gt; data.take_until((x) -&gt; x % <span class="dv">2</span> != <span class="dv">0</span>, [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>])
[]

&gt; data.take_until((x) -&gt; x &gt; <span class="dv">10</span>, [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>])
[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]

&gt; data.take_until(<span class="dv">nil</span>, [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])
<span class="dv">nil</span>

&gt; data.take_until((x) -&gt; <span class="dv">true</span>, <span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="drop">drop</h3>
<p><code>(long n, list xs) -&gt; list</code></p>
<p>Returns a list of elements in <code>xs</code> skipping the first <code>n</code> elements.
Returns an empty list if <code>n</code> is greater than the size of <code>xs</code>.
Returns <code>xs</code> if <code>n</code> is negative.</p>
<p>Returns <code>nil</code> if <code>n</code> is <code>nil</code> or <code>xs</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.drop(<span class="dv">2</span>, [<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>])
[<span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>]

&gt; data.drop(<span class="dv">10</span>, [<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>])
[]

&gt; data.drop(<span class="dv">0</span>, [<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>])
[<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>]

&gt; data.drop(-<span class="dv">3</span>, [<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>])
[<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>]

&gt; data.drop(<span class="dv">1</span>, <span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; data.drop(<span class="dv">nil</span>, [<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>])
<span class="dv">nil</span></code></pre></div>
<h3 id="drop_while">drop_while</h3>
<p><code>(function p, list xs) -&gt; list</code></p>
<p>Returns a list of elements in <code>xs</code> skipping leading elements <code>x</code> for which <code>p(x)</code> casts to <code>boolean</code> <code>true</code>.</p>
<p>Returns <code>nil</code> if <code>p</code> is <code>nil</code> or <code>xs</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.drop_while((x) -&gt; x &lt;= <span class="dv">2</span>, [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>])
[<span class="dv">3</span>, <span class="dv">4</span>]

&gt; data.drop_while((x) -&gt; x &gt; <span class="dv">10</span>, [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])
[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]

&gt; data.drop_while((x) -&gt; <span class="dv">false</span>, <span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; data.drop_while(<span class="dv">nil</span>, [<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>])
<span class="dv">nil</span></code></pre></div>
<h3 id="drop_until">drop_until</h3>
<p><code>(function p, list xs) -&gt; list</code></p>
<p>Returns a list of elements in <code>xs</code> skipping leading elements <code>x</code> for which <code>p(x)</code> casts to <code>boolean</code> <code>false</code>.</p>
<p>Returns <code>nil</code> if <code>p</code> is <code>nil</code> or <code>xs</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.drop_until((x) -&gt; x &gt; <span class="dv">2</span>, [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>])
[<span class="dv">3</span>, <span class="dv">4</span>]

&gt; data.drop_until((x) -&gt; x &lt;= <span class="dv">2</span>, [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>])
[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]

&gt; data.drop_until((x) -&gt; x &gt; <span class="dv">10</span>, [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>])
[]

&gt; data.drop_until((x) -&gt; <span class="dv">false</span>, <span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; data.drop_until(<span class="dv">nil</span>, [<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>])
<span class="dv">nil</span></code></pre></div>
<h3 id="contains">contains?</h3>
<p><code>(xs, x) -&gt; boolean</code></p>
<p>If <code>xs</code> is a <code>list</code>, returns <code>true</code> if <code>xs</code> contains <code>x</code>, <code>false</code> otherwise.If <code>xs</code> is a <code>dict</code>, returns <code>true</code> if any entry in <code>xs</code> contains <code>x</code> as a value, <code>false</code> otherwise.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<p>Throws an error if <code>xs</code> is neither a <code>list</code> nor a <code>dict</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.contains?([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="dv">2</span>)
<span class="dv">true</span>

&gt; data.contains?([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="dv">4</span>)
<span class="dv">false</span>

&gt; data.contains?({<span class="st">:a</span> <span class="dv">1</span>, <span class="st">:b</span> <span class="dv">2</span>, <span class="st">:c</span> <span class="dv">3</span>}, <span class="dv">2</span>)
<span class="dv">true</span>

&gt; data.contains?({<span class="st">:a</span> <span class="dv">1</span>, <span class="st">:b</span> <span class="dv">2</span>, <span class="st">:c</span> <span class="dv">3</span>}, <span class="dv">4</span>)
<span class="dv">false</span>

&gt; data.contains?(<span class="dv">nil</span>, <span class="dv">0</span>)
<span class="dv">nil</span>

&gt; data.contains?(<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;contains? is not defined for type string&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="index_of-1">index_of</h3>
<p><code>(list xs, x, long from=0) -&gt; long</code></p>
<p>If <code>xs</code> contains <code>x</code> at or after index <code>from</code> returns the index of that occurence. Returns -1 otherwise.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.<br />
Returns <code>nil</code> if <code>from</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.index_of([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="dv">2</span>)
<span class="dv">1</span>

&gt; data.index_of([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="dv">4</span>)
-<span class="dv">1</span>

&gt; data.index_of([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="dv">2</span>, <span class="dv">2</span>)
-<span class="dv">1</span>

&gt; data.index_of([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="dv">3</span>, <span class="dv">4</span>)
<span class="dv">5</span>

&gt; data.index_of(<span class="dv">nil</span>, <span class="dv">2</span>)
<span class="dv">nil</span>

&gt; data.index_of([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="dv">3</span>, <span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="last_index_of-1">last_index_of</h3>
<p><code>(list xs, x, long end=nil) -&gt; long</code></p>
<p>If <code>xs</code> contains <code>x</code> at or before index <code>end</code> returns the index of the last such occurence. Returns -1 otherwise.
If <code>end</code> is <code>nil</code>, it is interpreted as the last index of <code>xs</code>.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.last_index_of([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="dv">2</span>)
<span class="dv">1</span>

&gt; data.last_index_of([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="dv">2</span>)
<span class="dv">4</span>

&gt; data.last_index_of([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="dv">2</span>, <span class="dv">4</span>)
<span class="dv">4</span>

&gt; data.last_index_of([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="dv">2</span>, <span class="dv">3</span>)
<span class="dv">1</span>

&gt; data.last_index_of([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="dv">4</span>)
-<span class="dv">1</span>

&gt; data.last_index_of([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="dv">3</span>, <span class="dv">1</span>)
-<span class="dv">1</span>

&gt; data.last_index_of(<span class="dv">nil</span>, <span class="dv">2</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="key_of">key_of</h3>
<p><code>(dict xs, x) -&gt; string</code></p>
<p>If <code>xs</code> contains an entry with value <code>x</code>, returns the key of that entry.
If there are multiple such entries, it is undefined which of the keys is returned.</p>
<p>Returns <code>nil</code> if <code>xs</code> does not contain an entry with value <code>x</code>.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.key_of({<span class="st">:a</span> <span class="dv">1</span>, <span class="st">:b</span> <span class="dv">2</span>}, <span class="dv">1</span>)
<span class="st">&quot;a&quot;</span>

&gt; data.key_of({<span class="st">:a</span> <span class="dv">1</span>, <span class="st">:b</span> <span class="dv">2</span>}, <span class="dv">3</span>)
<span class="dv">nil</span>

&gt; data.key_of({<span class="st">:foo</span> <span class="dv">1</span>, <span class="st">:bar</span> <span class="dv">1</span>}, <span class="dv">1</span>)
<span class="st">&quot;foo&quot;</span>

&gt; data.key_of({<span class="st">:foo</span> <span class="dv">1</span>, <span class="st">:doo</span> <span class="dv">1</span>}, <span class="dv">1</span>)
<span class="st">&quot;doo&quot;</span>

&gt; data.key_of(<span class="dv">nil</span>, <span class="dv">1</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="flatten">flatten</h3>
<p><code>(list xs) -&gt; list</code></p>
<p>Builds a result list iterating over all elements <code>x</code> in <code>xs</code>. If <code>x</code> is a list, it is concatenated to the result list.
Otherwise the element is appended to the list. Returns the result list.</p>
<p>Returns nil if <code>xs</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.flatten([[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], <span class="dv">4</span>, <span class="dv">5</span>, [<span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>]])
[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>]

&gt; data.flatten([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])
[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]

&gt; data.flatten([<span class="dv">1</span>, <span class="dv">nil</span>, []])
[<span class="dv">1</span>, <span class="dv">nil</span>]

&gt; data.flatten([[[<span class="dv">1</span>]], [[<span class="dv">2</span>]]])
[[<span class="dv">1</span>], [<span class="dv">2</span>]]

&gt; data.flatten(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="map">map</h3>
<p><code>(xs, function f) -&gt; any</code></p>
<p>If <code>xs</code> is a <code>list</code>, returns a <code>list</code> of all <code>x</code> in <code>xs</code> mapped through <code>f</code>.
If <code>f</code> accepts one argument, <code>x</code> is passed.
If <code>f</code> accepts two arguments, <code>x</code> and the index of <code>x</code> are passed.</p>
<p>If <code>xs</code> is a <code>dict</code>, returns a <code>dict</code> of all entries mapped through <code>f</code>.
If <code>f</code> accepts one argument, each entrie's value is passed.
If <code>f</code> accepts two arguments, each entries's value and the key are passed.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<p>Throws an error if <code>xs</code> is neither a <code>list</code> nor a <code>dict</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.map([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], (x) -&gt; x*x)
[<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">9</span>]

&gt; data.map([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>], (x, i) -&gt; i..<span class="st">&quot; -&gt; &quot;</span>..x)
[<span class="st">&quot;0 -&gt; a&quot;</span>, <span class="st">&quot;1 -&gt; b&quot;</span>, <span class="st">&quot;2 -&gt; c&quot;</span>]

&gt; data.map({<span class="st">:a</span> <span class="dv">1</span>, <span class="st">:b</span> <span class="dv">2</span>, <span class="st">:c</span> <span class="dv">3</span>}, (x) -&gt; x*x)
{
  <span class="st">:a</span> <span class="dv">1</span>,
  <span class="st">:b</span> <span class="dv">4</span>,
  <span class="st">:c</span> <span class="dv">9</span>
}

&gt; data.map({<span class="st">:a</span> <span class="dv">1</span>, <span class="st">:b</span> <span class="dv">2</span>, <span class="st">:c</span> <span class="dv">3</span>}, (x, k) -&gt; k..<span class="st">&quot; -&gt; &quot;</span>..x)
{
  <span class="st">:a</span> <span class="st">&quot;a -&gt; 1&quot;</span>,
  <span class="st">:b</span> <span class="st">&quot;b -&gt; 2&quot;</span>,
  <span class="st">:c</span> <span class="st">&quot;c -&gt; 3&quot;</span>
}

&gt; data.map(<span class="dv">nil</span>, (x) -&gt; x)
<span class="dv">nil</span>

&gt; data.map([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], <span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; data.map(<span class="st">&quot;foo&quot;</span>, (x) -&gt; x)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;map is not defined for type string&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="flatmap">flatmap</h3>
<p><code>(xs, function f) -&gt; list</code></p>
<p>Maps each <code>x</code> of <code>xs</code> through <code>f</code>, concatenating the results if they are lists, appending them otherwise.</p>
<p>If <code>f</code> accepts a single argument, <code>x</code> is passed.
If <code>f</code> accepts two arguments, <code>x</code> and its index or key are passed.</p>
<p>Returns the resulting list.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.Returns <code>nil</code> if <code>f</code> is <code>nil</code>.</p>
<p>Throws an error if <code>xs</code> is neither a <code>list</code> nor a <code>dict</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.flatmap([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], (x) -&gt; data.repeat(x, x))
[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>]

&gt; data.flatmap([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>], (x) -&gt; <span class="kw">if</span> x == <span class="dv">1</span> <span class="kw">then</span> [<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>] <span class="kw">else</span> <span class="st">&quot;-&quot;</span>)
[<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;-&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>]

&gt; data.flatmap(<span class="dv">nil</span>, (x) -&gt; x)
<span class="dv">nil</span>

&gt; data.flatmap([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], <span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; data.flatmap(<span class="st">&quot;foo&quot;</span>, (x) -&gt; x)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;map is not defined for type string&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="mapcat">mapcat</h3>
<p><code>(xs, function f) -&gt; list</code></p>
<p>Maps each <code>x</code> of <code>xs</code> through <code>f</code>, concatenating the results if they are lists, ignoring them otherwise.</p>
<p>If <code>f</code> accepts a single argument, <code>x</code> is passed.
If <code>f</code> accepts two arguments, <code>x</code> and its index or key are passed.</p>
<p>Returns the resulting list.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.Returns <code>nil</code> if <code>f</code> is <code>nil</code>.</p>
<p>Throws an error if <code>xs</code> is neither a <code>list</code> nor a <code>dict</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.mapcat([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], (x) -&gt; data.repeat(x, x))
[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>]

&gt; data.mapcat([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>], (x) -&gt; <span class="kw">if</span> x == <span class="dv">1</span> <span class="kw">then</span> [<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>] <span class="kw">else</span> <span class="st">&quot;nothing&quot;</span>)
[<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>]

&gt; data.mapcat(<span class="dv">nil</span>, (x) -&gt; x)
<span class="dv">nil</span>

&gt; data.mapcat([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], <span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; data.mapcat(<span class="st">&quot;foo&quot;</span>, (x) -&gt; x)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;map is not defined for type string&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="zip">zip</h3>
<p><code>(list as, list bs) -&gt; list</code></p>
<p>Returns a list of same length as <code>as</code>. Each index <code>i</code> contains the value <code>[as[i], bs[i]]</code>.</p>
<p>Returns <code>nil</code> if <code>as</code> or <code>bs</code> are <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.zip([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>], [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])
[[<span class="st">&quot;a&quot;</span>, <span class="dv">1</span>], [<span class="st">&quot;b&quot;</span>, <span class="dv">2</span>], [<span class="st">&quot;c&quot;</span>, <span class="dv">3</span>]]

&gt; data.zip([<span class="dv">1</span>, <span class="dv">2</span>], [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])
[[<span class="dv">1</span>, <span class="dv">1</span>], [<span class="dv">2</span>, <span class="dv">2</span>]]

&gt; data.zip([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], [<span class="dv">1</span>, <span class="dv">2</span>])
[[<span class="dv">1</span>, <span class="dv">1</span>], [<span class="dv">2</span>, <span class="dv">2</span>], [<span class="dv">3</span>, <span class="dv">nil</span>]]

&gt; data.zip([<span class="dv">1</span>, <span class="dv">2</span>], <span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; data.zip(<span class="dv">nil</span>, [<span class="dv">1</span>, <span class="dv">2</span>])
<span class="dv">nil</span></code></pre></div>
<h3 id="zip_dict">zip_dict</h3>
<p><code>(list keys, list values) -&gt; dict</code></p>
<p>Returns a <code>dict</code> with all keys from <code>keys</code>. Each key contains the value <code>values[i]</code>, where <code>i</code>
is the index of the key in <code>keys</code>.</p>
<p>In case there are duplicate keys in <code>keys</code>, the last index of a key provides the corresponding value.</p>
<p>Returns <code>nil</code> if <code>keys</code> or <code>values</code> are <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.zip_dict([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>], [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])
{
  <span class="st">:a</span> <span class="dv">1</span>,
  <span class="st">:b</span> <span class="dv">2</span>,
  <span class="st">:c</span> <span class="dv">3</span>
}

&gt; data.zip_dict([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>], [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])
{
  <span class="st">:a</span> <span class="dv">1</span>,
  <span class="st">:b</span> <span class="dv">2</span>
}


&gt; data.zip_dict([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>], [<span class="dv">1</span>, <span class="dv">2</span>])
{
  <span class="st">:a</span> <span class="dv">1</span>,
  <span class="st">:b</span> <span class="dv">2</span>,
  <span class="st">:c</span> <span class="dv">nil</span>
}

&gt; data.zip_dict([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>], [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>])
{
  <span class="st">:a</span> <span class="dv">3</span>,
  <span class="st">:b</span> <span class="dv">4</span>
}

&gt; data.zip_dict([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>], <span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; data.zip_dict(<span class="dv">nil</span>, [<span class="dv">1</span>, <span class="dv">2</span>])
<span class="dv">nil</span></code></pre></div>
<h3 id="interpose">interpose</h3>
<p><code>(list xs, s) -&gt; list</code></p>
<p>Returns a <code>list</code> with all elements from <code>xs</code> separated by <code>s</code>.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.interpose([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>], <span class="dv">0</span>)
[<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">0</span>, <span class="dv">4</span>]

&gt; data.interpose([<span class="dv">1</span>], <span class="st">&quot;foo&quot;</span>)
[<span class="dv">1</span>]

&gt; data.interpose([], <span class="st">&quot;foo&quot;</span>)
[]

&gt; data.interpose(<span class="dv">nil</span>, <span class="st">&quot;foo&quot;</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="reduce">reduce</h3>
<p><code>(xs, init, function f) -&gt; any</code></p>
<p>Accumulates all <code>x</code> in <code>list</code> or <code>dict</code> <code>xs</code> to a single value using <code>f</code>, and starting with <code>init</code>.</p>
<p>If <code>f</code> accepts two arguments, the accumulated value and <code>x</code> are passed.
If <code>f</code> accepts three arguments, the accumulated value, <code>x</code>, and the index or key of <code>x</code> are passed.</p>
<p><code>f</code> returns the new accumulated value.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code> or <code>f</code> is <code>nil</code>.</p>
<p>Throws an error if <code>xs</code> is neither a <code>list</code> nor a <code>dict</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; data.reduce([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="dv">0</span>, (a, x) -&gt; a+x)
<span class="dv">6</span>

&gt; data.reduce([], <span class="dv">0</span>, (a, x) -&gt; a+x)
<span class="dv">0</span>

&gt; data.reduce([<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>], {}, (a, x, i) -&gt; data.put(a, x, i))
{
  <span class="st">:a</span> <span class="dv">0</span>,
  <span class="st">:b</span> <span class="dv">1</span>,
  <span class="st">:c</span> <span class="dv">2</span>
}

&gt; data.reduce({<span class="st">:a</span> <span class="dv">1</span>, <span class="st">:b</span> <span class="dv">2</span>, <span class="st">:c</span> <span class="dv">3</span>}, <span class="dv">0</span>, (a, x) -&gt; a+x)
<span class="dv">6</span>

&gt; data.reduce({}, <span class="dv">0</span>, (a, x) -&gt; a+x)
<span class="dv">0</span>

&gt; data.reduce({<span class="st">:a</span> <span class="st">&quot;alpha&quot;</span>, <span class="st">:b</span> <span class="st">&quot;beta&quot;</span>, <span class="st">:c</span> <span class="st">&quot;gamma&quot;</span>}, {}, (a, x, k) -&gt; data.put(a, x, k))
{
  <span class="st">:gamma</span> <span class="st">&quot;c&quot;</span>,
  <span class="st">:beta</span> <span class="st">&quot;b&quot;</span>,
  <span class="st">:alpha</span> <span class="st">&quot;a&quot;</span>
}

&gt; data.reduce(<span class="dv">nil</span>, <span class="dv">0</span>, (a, x) -&gt; x)
<span class="dv">nil</span>

&gt; data.reduce([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], <span class="dv">0</span>, <span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; data.reduce(<span class="st">&quot;foo&quot;</span>, <span class="dv">0</span>, (x) -&gt; x)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;reduce is not defined for type string&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="reduce_until">reduce_until</h3>
<p><code>(xs, init, function p, function f) -&gt; any</code></p>
<p>Accumulates all <code>x</code> in <code>list</code> or <code>dict</code> <code>xs</code> to a single value using <code>f</code>, and starting with <code>init</code>.</p>
<p>If <code>f</code> accepts two arguments, the accumulated value and <code>x</code> are passed.
If <code>f</code> accepts three arguments, the accumulated value, <code>x</code>, and the index or key of <code>x</code> are passed.</p>
<p><code>f</code> returns the new accumulated value.</p>
<p>Stops the process, if predicate function <code>p</code> returns a value that casts to <code>boolean</code> <code>true</code>
for the current accumulated value.</p>
<p>Returns <code>nil</code> if <code>xs</code>, <code>f</code>, or <code>p</code> are <code>nil</code>.</p>
<p>Throws an error if <code>xs</code> is neither a <code>list</code> nor a <code>dict</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">
<span class="co"># sum up integers, until sum exceeds 10</span>
&gt; data.reduce_until([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>], <span class="dv">0</span>, (a) -&gt; a &gt; <span class="dv">10</span>, (a, x) -&gt; a+x)
<span class="dv">15</span>

<span class="co"># initial value is checked</span>
&gt; data.reduce_until([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], <span class="dv">0</span>, (a) -&gt; <span class="dv">true</span>, (a, x) -&gt; a+x)
<span class="dv">0</span>

&gt; data.reduce_until({<span class="st">:a</span> <span class="st">&quot;alpha&quot;</span>, <span class="st">:b</span> <span class="st">&quot;beta&quot;</span>, <span class="st">:c</span> <span class="st">&quot;gamma&quot;</span>}, {}, (a) -&gt; data.size(a) == <span class="dv">2</span>, (a, x, k) -&gt; data.put(a, x, k))
{
  <span class="st">:beta</span> <span class="st">&quot;b&quot;</span>,
  <span class="st">:alpha</span> <span class="st">&quot;a&quot;</span>
}

&gt; data.reduce_until(<span class="dv">nil</span>, <span class="dv">0</span>, (a) -&gt; <span class="dv">true</span>, (a, x) -&gt; x)
<span class="dv">nil</span>

&gt; data.reduce_until([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], <span class="dv">0</span>, <span class="dv">nil</span>, (a, x) -&gt; a)
<span class="dv">nil</span>

&gt; data.reduce_until([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], <span class="dv">0</span>, (a) -&gt; <span class="dv">true</span>, <span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; data.reduce_until(<span class="st">&quot;foo&quot;</span>, <span class="dv">0</span>, (a) -&gt; <span class="dv">true</span>, (a, x) -&gt; a)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;reduce_until is not defined for type string&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="reduce_while">reduce_while</h3>
<p><code>(xs, init, function p, function f) -&gt; any</code></p>
<p>Accumulates all <code>x</code> in <code>list</code> or <code>dict</code> <code>xs</code> to a single value using <code>f</code>, and starting with <code>init</code>.</p>
<p>If <code>f</code> accepts two arguments, the accumulated value and <code>x</code> are passed.
If <code>f</code> accepts three arguments, the accumulated value, <code>x</code>, and the index or key of <code>x</code> are passed.</p>
<p><code>f</code> returns the new accumulated value.</p>
<p>Stops the process, if predicate function <code>p</code> returns a value that casts to <code>boolean</code> <code>false</code>
for the current accumulated value.</p>
<p>Returns <code>nil</code> if <code>xs</code>, <code>f</code>, or <code>p</code> are <code>nil</code>.</p>
<p>Throws an error if <code>xs</code> is neither a <code>list</code> nor a <code>dict</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">
<span class="co"># sum up integers, until sum exceeds 10</span>
&gt; data.reduce_while([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>], <span class="dv">0</span>, (a) -&gt; a &lt;= <span class="dv">10</span>, (a, x) -&gt; a+x)
<span class="dv">15</span>

<span class="co"># initial value is checked</span>
&gt; data.reduce_while([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], <span class="dv">0</span>, (a) -&gt; <span class="dv">false</span>, (a, x) -&gt; a+x)
<span class="dv">0</span>

&gt; data.reduce_while({<span class="st">:a</span> <span class="st">&quot;alpha&quot;</span>, <span class="st">:b</span> <span class="st">&quot;beta&quot;</span>, <span class="st">:c</span> <span class="st">&quot;gamma&quot;</span>}, {}, (a) -&gt; data.size(a) &lt; <span class="dv">2</span>, (a, x, k) -&gt; data.put(a, x, k))
{
  <span class="st">:beta</span> <span class="st">&quot;b&quot;</span>,
  <span class="st">:alpha</span> <span class="st">&quot;a&quot;</span>
}

&gt; data.reduce_while(<span class="dv">nil</span>, <span class="dv">0</span>, (a) -&gt; <span class="dv">true</span>, (a, x) -&gt; x)
<span class="dv">nil</span>

&gt; data.reduce_while([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], <span class="dv">0</span>, <span class="dv">nil</span>, (a, x) -&gt; a)
<span class="dv">nil</span>

&gt; data.reduce_while([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], <span class="dv">0</span>, (a) -&gt; <span class="dv">true</span>, <span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; data.reduce_while(<span class="st">&quot;foo&quot;</span>, <span class="dv">0</span>, (a) -&gt; <span class="dv">true</span>, (a, x) -&gt; a)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;reduce_while is not defined for type string&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h2 id="library-time">library time</h2>
<p>The time library provides functions for processing datetime values.</p>
<h3 id="epoch">epoch</h3>
<p>The instant of time at 1970-01-01T00:00:00Z</p>
<h3 id="seconds_between">seconds_between</h3>
<p><code>(datetime start_inclusive, datetime end_exclusive) -&gt; long</code></p>
<p>Returns the number of full seconds between given datetimes.</p>
<p>Returns a negative number if start datetime is after end datetime.</p>
<p>Returns <code>nil</code> if any argument is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.seconds_between(time.epoch, time.epoch)
<span class="dv">0</span>

&gt; time.seconds_between(<span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="dv">00</span>, <span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="bn">01</span>)
<span class="dv">1</span>

&gt; time.seconds_between(<span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="bn">01</span>, <span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="dv">00</span>)
-<span class="dv">1</span>

&gt; time.seconds_between(time.epoch, <span class="dv">2018</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="dv">00</span>)
<span class="dv">1514764800</span>

&gt; time.seconds_between(<span class="dv">nil</span>, <span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="minutes_between">minutes_between</h3>
<p><code>(datetime start_inclusive, datetime end_exclusive) -&gt; long</code></p>
<p>Returns the number of full minutes between given datetimes.</p>
<p>Returns a negative number if start datetime is after end datetime.</p>
<p>Returns <code>nil</code> if any argument is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.minutes_between(time.epoch, time.epoch)
<span class="dv">0</span>

&gt; time.minutes_between(<span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="dv">00</span>, <span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="bn">01</span>:<span class="dv">00</span>)
<span class="dv">1</span>

&gt; time.minutes_between(<span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="bn">01</span>:<span class="dv">00</span>, <span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="dv">00</span>)
-<span class="dv">1</span>

&gt; time.minutes_between(time.epoch, <span class="dv">2018</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="dv">00</span>)
<span class="dv">25246080</span>

&gt; time.minutes_between(<span class="dv">nil</span>, <span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="hours_between">hours_between</h3>
<p><code>(datetime start_inclusive, datetime end_exclusive) -&gt; long</code></p>
<p>Returns the number of full hours between given datetimes.</p>
<p>Returns a negative number if start datetime is after end datetime.</p>
<p>Returns <code>nil</code> if any argument is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.hours_between(time.epoch, time.epoch)
<span class="dv">0</span>

&gt; time.hours_between(<span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="dv">00</span>, <span class="dv">1970</span><span class="bn">-01-01</span>T01:<span class="dv">00</span>:<span class="dv">00</span>)
<span class="dv">1</span>

&gt; time.hours_between(<span class="dv">1970</span><span class="bn">-01-01</span>T01:<span class="dv">00</span>:<span class="dv">00</span>, <span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="dv">00</span>)
-<span class="dv">1</span>

&gt; time.hours_between(time.epoch, <span class="dv">2018</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="dv">00</span>)
<span class="dv">420768</span>

&gt; time.hours_between(<span class="dv">nil</span>, <span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="days_between">days_between</h3>
<p><code>(datetime start_inclusive, datetime end_exclusive) -&gt; long</code></p>
<p>Returns the number of full days between given datetimes.</p>
<p>Returns a negative number if start datetime is after end datetime.</p>
<p>Returns <code>nil</code> if any argument is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.days_between(time.epoch, time.epoch)
<span class="dv">0</span>

&gt; time.days_between(<span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="dv">00</span>, <span class="dv">1970</span><span class="bn">-01-02</span>T00:<span class="dv">00</span>:<span class="dv">00</span>)
<span class="dv">1</span>

&gt; time.days_between(<span class="dv">1970</span><span class="bn">-01-02</span>T00:<span class="dv">00</span>:<span class="dv">00</span>, <span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="dv">00</span>)
-<span class="dv">1</span>

&gt; time.days_between(time.epoch, <span class="dv">2018</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="dv">00</span>)
<span class="dv">17532</span>

&gt; time.days_between(<span class="dv">nil</span>, <span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="months_between">months_between</h3>
<p><code>(datetime start_inclusive, datetime end_exclusive) -&gt; long</code></p>
<p>Returns the number of full months between given datetimes.</p>
<p>Returns a negative number if start datetime is after end datetime.</p>
<p>Returns <code>nil</code> if any argument is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.months_between(time.epoch, time.epoch)
<span class="dv">0</span>

&gt; time.months_between(<span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="dv">00</span>, <span class="dv">1970</span><span class="bn">-02-01</span>T00:<span class="dv">00</span>:<span class="dv">00</span>)
<span class="dv">1</span>

&gt; time.months_between(<span class="dv">1970</span><span class="bn">-02-01</span>T00:<span class="dv">00</span>:<span class="dv">00</span>, <span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="dv">00</span>)
-<span class="dv">1</span>

&gt; time.months_between(time.epoch, <span class="dv">2018</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="dv">00</span>)
<span class="dv">576</span>

&gt; time.months_between(<span class="dv">nil</span>, <span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="years_between">years_between</h3>
<p><code>(datetime start_inclusive, datetime end_exclusive) -&gt; long</code></p>
<p>Returns the number of full years between given datetimes.</p>
<p>Returns a negative number if start datetime is after end datetime.</p>
<p>Returns <code>nil</code> if any argument is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.years_between(time.epoch, time.epoch)
<span class="dv">0</span>

&gt; time.years_between(<span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="dv">00</span>, <span class="dv">1971</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="dv">00</span>)
<span class="dv">1</span>

&gt; time.years_between(<span class="dv">1971</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="dv">00</span>, <span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="dv">00</span>)
-<span class="dv">1</span>

&gt; time.years_between(time.epoch, <span class="dv">2018</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="dv">00</span>)
<span class="dv">48</span>

&gt; time.years_between(<span class="dv">nil</span>, <span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="period_between">period_between</h3>
<p><code>(datetime start_inclusive, datetime end_exclusive) -&gt; dict</code></p>
<p>Returns a dict with long values on keys <code>:years</code>, <code>:months</code>, and <code>:days</code>, representing a calendar period between two datetimes.</p>
<p>The values are negative if start datetime is after end datetime.</p>
<p>Returns <code>nil</code> if any argument is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.period_between(time.epoch, time.epoch)
{
  <span class="st">:months</span> <span class="dv">0</span>,
  <span class="st">:years</span> <span class="dv">0</span>,
  <span class="st">:days</span> <span class="dv">0</span>
}

&gt; time.period_between(<span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="dv">00</span>, <span class="dv">1973-08</span><span class="bn">-02</span>T12:<span class="dv">23</span>:<span class="dv">13</span>)
{
  <span class="st">:months</span> <span class="dv">7</span>,
  <span class="st">:years</span> <span class="dv">3</span>,
  <span class="st">:days</span> <span class="dv">1</span>
}

&gt; time.period_between(<span class="dv">1973-08</span><span class="bn">-02</span>T12:<span class="dv">23</span>:<span class="dv">13</span>, <span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="dv">00</span>)
{
  <span class="st">:months</span> -<span class="dv">7</span>,
  <span class="st">:years</span> -<span class="dv">3</span>,
  <span class="st">:days</span> -<span class="dv">1</span>
}


&gt; time.period_between(<span class="dv">nil</span>, <span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="duration_between">duration_between</h3>
<p><code>(datetime start_inclusive, datetime end_exclusive) -&gt; dict</code></p>
<p>Returns a dict with long values on keys <code>:seconds</code>, and <code>:nano_seconds</code>, representing a duration between two datetimes.</p>
<p><code>:seconds</code> are negative if start datetime is after end datetime.
<code>:nano_seconds</code> is never negative and within the range of <code>0 - 999,999,999</code>.
A duration of <code>-1</code> nanosecond is represented as <code>-1</code> <code>:seconds</code> and <code>999,999,999</code> <code>:nanoseconds</code>.</p>
<p>Returns <code>nil</code> if any argument is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.duration_between(time.epoch, time.epoch)
{
  <span class="st">:nano_seconds</span> <span class="dv">0</span>,
  <span class="st">:seconds</span> <span class="dv">0</span>
}

&gt; time.duration_between(<span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="dv">00</span>, <span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="fl">00.000000001</span>)
{
  <span class="st">:nano_seconds</span> <span class="dv">1</span>,
  <span class="st">:seconds</span> <span class="dv">0</span>
}

&gt; time.duration_between(<span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="fl">00.000000001</span>, <span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="dv">00</span>)
{
  <span class="st">:nano_seconds</span> <span class="dv">999999999</span>,
  <span class="st">:seconds</span> -<span class="dv">1</span>
}

&gt; time.duration_between(<span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="fl">00.00000233</span>, <span class="dv">1973-08</span><span class="bn">-02</span>T12:<span class="dv">23</span>:<span class="fl">13.928736</span>)
{
  <span class="st">:nano_seconds</span> <span class="dv">928733670</span>,
  <span class="st">:seconds</span> <span class="dv">113142193</span>
}

&gt; time.duration_between(<span class="dv">nil</span>, <span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="add_period">add_period</h3>
<p><code>(datetime start, long years=0, long months=0, long days=0) -&gt; datetime</code></p>
<p>Adds a calendar period to the given start datetime and returns the result.</p>
<p>Supply negative period numbers to effectively subtract a period.</p>
<p>Returns <code>nil</code> if any argument is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">
&gt; time.add_period(time.epoch, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>)
<span class="dv">1970</span><span class="bn">-01-02</span>T00:<span class="dv">00</span>:00Z@<span class="st">`UTC`</span>

&gt; time.add_period(time.epoch, <span class="dv">0</span>, <span class="dv">0</span>, -<span class="dv">1</span>)
<span class="dv">1969-12</span>-31T00:<span class="dv">00</span>:00Z@<span class="st">`UTC`</span>

&gt; time.add_period(<span class="dv">2017</span><span class="bn">-05</span>-24T00:<span class="dv">00</span>:00Z, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)
<span class="dv">2018</span><span class="bn">-07</span>-27T00:<span class="dv">00</span>:00Z@<span class="st">`UTC`</span>

&gt; time.add_period(time.epoch, <span class="dv">2</span>, <span class="dv">23</span>, -<span class="dv">98</span>)
<span class="dv">1973-08</span>-25T00:<span class="dv">00</span>:00Z@<span class="st">`UTC`</span>

&gt; time.add_period(<span class="dv">nil</span>, <span class="dv">nil</span>, <span class="dv">nil</span>, <span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="add_duration">add_duration</h3>
<p><code>(datetime start, long seconds=0, long nano_of_second=0) -&gt; datetime</code></p>
<p>Adds a time duration to the given start datetime and returns the result.</p>
<p>Supply negative numbers to effectively subtract a duration.</p>
<p>Returns <code>nil</code> if any argument is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">
&gt; time.add_duration(time.epoch, <span class="dv">0</span>, <span class="dv">1</span>)
<span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="fl">00.000000001</span>Z@<span class="st">`UTC`</span>

&gt; time.add_duration(time.epoch, <span class="dv">0</span>, -<span class="dv">1</span>)
<span class="dv">1969-12</span>-31T23:<span class="dv">59</span>:<span class="fl">59.999999999</span>Z@<span class="st">`UTC`</span>

&gt; time.add_duration(<span class="dv">2017</span><span class="bn">-05</span>-24T00:<span class="dv">00</span>:00Z, <span class="dv">3600</span>)
<span class="dv">2017</span><span class="bn">-05</span>-24T01:<span class="dv">00</span>:00Z@<span class="st">`UTC`</span>

&gt; time.add_duration(<span class="dv">2017</span><span class="bn">-05</span>-24T00:<span class="dv">00</span>:00Z, -<span class="dv">3600</span>)
<span class="dv">2017</span><span class="bn">-05</span>-23T23:<span class="dv">00</span>:00Z@<span class="st">`UTC`</span>

&gt; time.add_duration(<span class="dv">nil</span>, <span class="dv">nil</span>, <span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="year">year</h3>
<p><code>(datetime x) -&gt; long</code></p>
<p>Returns the year component of given datetime <code>x</code>.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.year(time.epoch)
<span class="dv">1970</span>

&gt; time.year(<span class="dv">2017</span><span class="bn">-02</span>-21T00:<span class="dv">00</span>:<span class="dv">00</span>)
<span class="dv">2017</span>

&gt; time.year(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="month">month</h3>
<p><code>(datetime x) -&gt; long</code></p>
<p>Returns the month component of given datetime <code>x</code>.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.month(time.epoch)
<span class="dv">1</span>

&gt; time.month(<span class="dv">2017</span><span class="bn">-02</span>-21T00:<span class="dv">00</span>:<span class="dv">00</span>)
<span class="dv">2</span>

&gt; time.month(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="day_of_month">day_of_month</h3>
<p><code>(datetime x) -&gt; long</code></p>
<p>Returns the day of month component of given datetime <code>x</code>.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.day_of_month(time.epoch)
<span class="dv">1</span>

&gt; time.day_of_month(<span class="dv">2017</span><span class="bn">-02</span>-21T00:<span class="dv">00</span>:<span class="dv">00</span>)
<span class="dv">21</span>

&gt; time.day_of_month(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="day_of_year">day_of_year</h3>
<p><code>(datetime x) -&gt; long</code></p>
<p>Returns the day of year of given datetime <code>x</code>.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.day_of_year(time.epoch)
<span class="dv">1</span>

&gt; time.day_of_year(<span class="dv">2017</span><span class="bn">-02</span>-21T00:<span class="dv">00</span>:<span class="dv">00</span>)
<span class="dv">52</span>

&gt; time.day_of_year(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="day_of_week">day_of_week</h3>
<p><code>(datetime x) -&gt; long</code></p>
<p>Returns the day of week of given datetime <code>x</code>.</p>
<p>The returned number represents a day of week as per the following mapping.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Nr</th>
<th style="text-align: left;">Day of week</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">Monday</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">Tuesday</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">Wednesday</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">Thursday</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">Friday</td>
</tr>
<tr class="even">
<td style="text-align: left;">6</td>
<td style="text-align: left;">Saturday</td>
</tr>
<tr class="odd">
<td style="text-align: left;">7</td>
<td style="text-align: left;">Sunday</td>
</tr>
</tbody>
</table>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.day_of_week(time.epoch)
<span class="dv">4</span>

&gt; time.day_of_week(<span class="dv">2017</span><span class="bn">-05</span>-24T00:<span class="dv">00</span>:<span class="dv">00</span>)
<span class="dv">3</span>

&gt; time.day_of_week(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="hour">hour</h3>
<p><code>(datetime x) -&gt; long</code></p>
<p>Returns the hour of given datetime <code>x</code>.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.hour(time.epoch)
<span class="dv">0</span>

&gt; time.hour(<span class="dv">2017</span><span class="bn">-02</span>-21T23:<span class="dv">00</span>:<span class="dv">00</span>)
<span class="dv">23</span>

&gt; time.hour(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="minute">minute</h3>
<p><code>(datetime x) -&gt; long</code></p>
<p>Returns the minute of given datetime <code>x</code>.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.minute(time.epoch)
<span class="dv">0</span>

&gt; time.minute(<span class="dv">2017</span><span class="bn">-02</span>-21T00:<span class="dv">59</span>:<span class="dv">00</span>)
<span class="dv">59</span>

&gt; time.minute(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="second">second</h3>
<p><code>(datetime x) -&gt; long</code></p>
<p>Returns the second of given datetime <code>x</code>.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.second(time.epoch)
<span class="dv">0</span>

&gt; time.second(<span class="dv">2017</span><span class="bn">-02</span>-21T00:<span class="dv">00</span>:<span class="dv">12</span>)
<span class="dv">12</span>

&gt; time.second(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="nano_of_second">nano_of_second</h3>
<p><code>(datetime x) -&gt; long</code></p>
<p>Returns the nanoseconds of given datetime <code>x</code>.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.nano_of_second(time.epoch)
<span class="dv">0</span>

&gt; time.nano_of_second(<span class="dv">2017</span><span class="bn">-02</span>-21T00:<span class="dv">00</span>:<span class="fl">00.123456789</span>)
<span class="dv">123456789</span>

&gt; time.nano_of_second(<span class="dv">2017</span><span class="bn">-02</span>-21T00:<span class="dv">00</span>:<span class="fl">00.01</span>)
<span class="dv">10000000</span>

&gt; time.nano_of_second(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="week_of_year">week_of_year</h3>
<p><code>(datetime x) -&gt; long</code></p>
<p>Returns the week of year for given datetime <code>x</code>. The ISO-8601 definition is used, where a week starts on Monday and the first week has a minimum of 4 days.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.week_of_year(time.epoch)
<span class="dv">1</span>

&gt; time.week_of_year(<span class="dv">2010</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="fl">00.00</span>)
<span class="dv">53</span>

&gt; time.week_of_year(<span class="dv">2011</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="fl">00.00</span>)
<span class="dv">52</span>

&gt; time.week_of_year(<span class="dv">2012</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="fl">00.00</span>)
<span class="dv">52</span>

&gt; time.week_of_year(<span class="dv">2013</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="fl">00.00</span>)
<span class="dv">1</span>

&gt; time.week_of_year(<span class="dv">2017</span><span class="bn">-02</span>-21T00:<span class="dv">00</span>:<span class="fl">00.00</span>)
<span class="dv">8</span>

&gt; time.week_of_year(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="offset_seconds">offset_seconds</h3>
<p><code>(datetime x) -&gt; long</code></p>
<p>Returns the number of seconds in the offset from UTC for given datetime <code>x</code>.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.offset_seconds(time.epoch)
<span class="dv">0</span>

&gt; time.offset_seconds(<span class="dv">2010</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="fl">00.00</span><span class="dv">+02</span>:<span class="dv">00</span>)
<span class="dv">7200</span>

&gt; time.offset_seconds(<span class="dv">2011</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="fl">00.00</span><span class="bn">-03</span>:<span class="dv">00</span>)
-<span class="dv">10800</span>

&gt; time.offset_seconds(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="zone">zone</h3>
<p><code>(datetime x) -&gt; long</code></p>
<p>Returns the time zone for given datetime <code>x</code>.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.zone(time.epoch)
<span class="st">&quot;UTC&quot;</span>

&gt; time.zone(<span class="dv">2010</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="fl">00.00</span><span class="dv">+02</span>:<span class="dv">00</span>)
<span class="st">&quot;UTC+02:00&quot;</span>

&gt; time.zone(<span class="dv">2010</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="fl">00.00</span><span class="dv">+01</span>:<span class="dv">00</span>@<span class="st">`Europe/Berlin`</span>)
<span class="st">&quot;Europe/Berlin&quot;</span>

&gt; time.zone(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="with_year">with_year</h3>
<p><code>(datetime x, long year) -&gt; datetime</code></p>
<p>Returns the datetime <code>x</code> with the year field set to <code>year</code>.</p>
<p>Returns <code>nil</code> if any argument is <code>nil</code>.</p>
<p>Throws an error if no datetime can be constructed with given year.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.with_year(time.epoch, <span class="dv">2007</span>)
<span class="dv">2007</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:00Z@<span class="st">`UTC`</span>

&gt; time.with_year(time.epoch, <span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; time.with_year(<span class="dv">nil</span>, <span class="dv">2017</span>)
<span class="dv">nil</span>

&gt; time.with_year(time.epoch, <span class="dv">1000000000</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;Invalid value for Year (valid values -999999999 - 999999999): 1000000000&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="with_month">with_month</h3>
<p><code>(datetime x, long month) -&gt; datetime</code></p>
<p>Returns the datetime <code>x</code> with the month field set to <code>month</code>.</p>
<p>Returns <code>nil</code> if any argument is <code>nil</code>.</p>
<p>Throws an error if no datetime can be constructed with given month.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.with_month(time.epoch, <span class="dv">6</span>)
<span class="dv">1970</span><span class="bn">-06-01</span>T00:<span class="dv">00</span>:00Z@<span class="st">`UTC`</span>

&gt; time.with_month(time.epoch, <span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; time.with_month(<span class="dv">nil</span>, <span class="dv">6</span>)
<span class="dv">nil</span>

&gt; time.with_month(time.epoch, <span class="dv">13</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;Invalid value for MonthOfYear (valid values 1 - 12): 13&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="with_day_of_month">with_day_of_month</h3>
<p><code>(datetime x, long day_of_month) -&gt; datetime</code></p>
<p>Returns the datetime <code>x</code> with the day_of_month field set to <code>day_of_month</code>.</p>
<p>Returns <code>nil</code> if any argument is <code>nil</code>.</p>
<p>Throws an error if no datetime can be constructed with given <code>day_of_month</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.with_day_of_month(time.epoch, <span class="dv">23</span>)
<span class="dv">1970</span><span class="bn">-01</span>-23T00:<span class="dv">00</span>:00Z@<span class="st">`UTC`</span>

&gt; time.with_day_of_month(time.epoch, <span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; time.with_day_of_month(<span class="dv">nil</span>, <span class="dv">23</span>)
<span class="dv">nil</span>

&gt; time.with_day_of_month(time.epoch, <span class="dv">33</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;Invalid value for DayOfMonth (valid values 1 - 28/31): 33&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="with_hour">with_hour</h3>
<p><code>(datetime x, long hour) -&gt; datetime</code></p>
<p>Returns the datetime <code>x</code> with the hour field set to <code>hour</code>.</p>
<p>Returns <code>nil</code> if any argument is <code>nil</code>.</p>
<p>Throws an error if no datetime can be constructed with given <code>hour</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.with_hour(time.epoch, <span class="dv">4</span>)
<span class="dv">1970</span><span class="bn">-01-01</span>T04:<span class="dv">00</span>:00Z@<span class="st">`UTC`</span>

&gt; time.with_hour(time.epoch, <span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; time.with_hour(<span class="dv">nil</span>, <span class="dv">4</span>)
<span class="dv">nil</span>

&gt; time.with_hour(time.epoch, <span class="dv">25</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;Invalid value for HourOfDay (valid values 0 - 23): 25&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="with_minute">with_minute</h3>
<p><code>(datetime x, long minute) -&gt; datetime</code></p>
<p>Returns the datetime <code>x</code> with the minute field set to <code>minute</code>.</p>
<p>Returns <code>nil</code> if any argument is <code>nil</code>.</p>
<p>Throws an error if no datetime can be constructed with given <code>minute</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.with_minute(time.epoch, <span class="dv">42</span>)
<span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">42</span>:00Z@<span class="st">`UTC`</span>

&gt; time.with_minute(time.epoch, <span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; time.with_minute(<span class="dv">nil</span>, <span class="dv">42</span>)
<span class="dv">nil</span>

&gt; time.with_minute(time.epoch, <span class="dv">78</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;Invalid value for MinuteOfHour (valid values 0 - 59): 78&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="with_second">with_second</h3>
<p><code>(datetime x, long second) -&gt; datetime</code></p>
<p>Returns the datetime <code>x</code> with the second field set to <code>second</code>.</p>
<p>Returns <code>nil</code> if any argument is <code>nil</code>.</p>
<p>Throws an error if no datetime can be constructed with given <code>second</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.with_second(time.epoch, <span class="dv">42</span>)
<span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:42Z@<span class="st">`UTC`</span>

&gt; time.with_second(time.epoch, <span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; time.with_second(<span class="dv">nil</span>, <span class="dv">42</span>)
<span class="dv">nil</span>

&gt; time.with_second(time.epoch, <span class="dv">78</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;Invalid value for SecondOfMinute (valid values 0 - 59): 78&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="with_nano_of_second">with_nano_of_second</h3>
<p><code>(datetime x, long nano_of_second) -&gt; datetime</code></p>
<p>Returns the datetime <code>x</code> with the nano_of_second field set to <code>nano_of_second</code>.</p>
<p>Returns <code>nil</code> if any argument is <code>nil</code>.</p>
<p>Throws an error if no datetime can be constructed with given <code>nano_of_second</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.with_nano_of_second(time.epoch, <span class="dv">123456789</span>)
<span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="fl">00.123456789</span>Z@<span class="st">`UTC`</span>

&gt; time.with_nano_of_second(time.epoch, <span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; time.with_nano_of_second(<span class="dv">nil</span>, <span class="dv">123456789</span>)
<span class="dv">nil</span>

&gt; time.with_nano_of_second(time.epoch, <span class="dv">1000000000</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;Invalid value for NanoOfSecond (valid values 0 - 999999999): 1000000000&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="with_zone">with_zone</h3>
<p><code>(datetime x, string tz) -&gt; datetime</code></p>
<p>Returns the datetime <code>x</code> with the time zone field set to <code>tz</code>.</p>
<p>Returns <code>nil</code> if any argument is <code>nil</code>.</p>
<p>Throws an error if no datetime can be constructed with given <code>tz</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.with_zone(time.epoch, <span class="st">&quot;Europe/Berlin&quot;</span>)
<span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="dv">00+01</span>:<span class="dv">00</span>@<span class="st">`Europe/Berlin`</span>

&gt; time.with_zone(time.epoch, <span class="st">&quot;GMT+08:00&quot;</span>)
<span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:<span class="dv">00+08</span>:<span class="dv">00</span>@<span class="st">`GMT+08:00`</span>

&gt; time.with_zone(time.epoch, <span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; time.with_zone(<span class="dv">nil</span>, <span class="st">&quot;Europe/Berlin&quot;</span>)
<span class="dv">nil</span>

&gt; time.with_zone(time.epoch, <span class="st">&quot;---&quot;</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;unknown time zone id: ---&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="same_instant_at_zone">same_instant_at_zone</h3>
<p><code>(datetime x, string tz) -&gt; datetime</code></p>
<p>Returns a datetime representing the same instant as <code>x</code> in time zone <code>tz</code>.</p>
<p>Returns <code>nil</code> if any argument is <code>nil</code>.</p>
<p>Throws an error if no datetime can be constructed with given <code>tz</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.same_instant_at_zone(time.epoch, <span class="st">&quot;Europe/Berlin&quot;</span>)
<span class="dv">1970</span><span class="bn">-01-01</span>T01:<span class="dv">00</span>:<span class="dv">00+01</span>:<span class="dv">00</span>@<span class="st">`Europe/Berlin`</span>

&gt; time.same_instant_at_zone(time.epoch, <span class="st">&quot;GMT+08:00&quot;</span>)
<span class="dv">1970</span><span class="bn">-01-01</span>T08:<span class="dv">00</span>:<span class="dv">00+08</span>:<span class="dv">00</span>@<span class="st">`GMT+08:00`</span>

<span class="co"># the instant in time is the same</span>
&gt; time.compare(<span class="dv">1970</span><span class="bn">-01-01</span>T01:<span class="dv">00</span>:<span class="dv">00+01</span>:<span class="dv">00</span>@<span class="st">`Europe/Berlin`</span>, <span class="dv">1970</span><span class="bn">-01-01</span>T08:<span class="dv">00</span>:<span class="dv">00+08</span>:<span class="dv">00</span>@<span class="st">`GMT+08:00`</span>)
<span class="dv">0</span>

&gt; time.same_instant_at_zone(time.epoch, <span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; time.same_instant_at_zone(<span class="dv">nil</span>, <span class="st">&quot;Europe/Berlin&quot;</span>)
<span class="dv">nil</span>

&gt; time.same_instant_at_zone(time.epoch, <span class="st">&quot;---&quot;</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;unknown time zone id: ---&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="unix_timestamp">unix_timestamp</h3>
<p><code>(long s) -&gt; datetime</code></p>
<p>Returns a datetime representing epoch + <code>s</code> seconds in time zone <code>UTC</code>.</p>
<p>Returns <code>nil</code> if <code>s</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">
&gt; time.unix_timestamp(<span class="dv">0</span>)
<span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:00Z@<span class="st">`UTC`</span>

&gt; time.unix_timestamp(<span class="dv">1496933995</span>)
<span class="dv">2017</span><span class="bn">-06</span>-08T14:<span class="dv">59</span>:55Z@<span class="st">`UTC`</span>

&gt; time.unix_timestamp(-<span class="dv">1496933995</span>)
<span class="dv">1922</span><span class="bn">-07</span>-26T09:<span class="dv">00</span>:<span class="bn">05</span>Z@<span class="st">`UTC`</span></code></pre></div>
<h3 id="unix_timestamp_ms">unix_timestamp_ms</h3>
<p><code>(long ms) -&gt; datetime</code></p>
<p>Returns a datetime representing epoch + <code>ms</code> milliseconds in time zone <code>UTC</code>.</p>
<p>Returns <code>nil</code> if <code>s</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">
&gt; time.unix_timestamp_ms(<span class="dv">0</span>)
<span class="dv">1970</span><span class="bn">-01-01</span>T00:<span class="dv">00</span>:00Z@<span class="st">`UTC`</span>

&gt; time.unix_timestamp_ms(<span class="dv">1496933995763</span>)
<span class="dv">2017</span><span class="bn">-06</span>-08T14:<span class="dv">59</span>:<span class="fl">55.763</span>Z@<span class="st">`UTC`</span>

&gt; time.unix_timestamp_ms(-<span class="dv">1496933995763</span>)
<span class="dv">1922</span><span class="bn">-07</span>-26T09:<span class="dv">00</span>:<span class="bn">04</span>.237Z@<span class="st">`UTC`</span></code></pre></div>
<h3 id="compare">compare</h3>
<p><code>(datetime a, datetime b) -&gt; long</code></p>
<p>Compares two datetimes <code>a</code> and <code>b</code>.</p>
<p>Returns -1 if <code>a</code> precedes <code>b</code>.<br />
Returns 1 if <code>b</code> precedes <code>a</code>.<br />
Returns 0 if <code>a</code> and <code>b</code> describe the same instant in time.<br />
Assumes <code>nil</code> to precede any non-nil datetime.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.compare(time.epoch, time.epoch)
<span class="dv">0</span>

&gt; time.compare(time.epoch, <span class="dv">2017</span><span class="bn">-05</span>-24T00:<span class="dv">00</span>:<span class="dv">00</span>)
-<span class="dv">1</span>

&gt; time.compare(<span class="dv">2017</span><span class="bn">-05</span>-24T00:<span class="dv">00</span>:<span class="dv">00</span>, time.epoch)
<span class="dv">1</span>

&gt; time.compare(<span class="dv">2017</span><span class="bn">-05</span>-24T00:<span class="dv">00</span>:<span class="dv">00</span>, <span class="dv">2017</span><span class="bn">-05</span>-24T02:<span class="dv">00</span>:<span class="dv">00+02</span>:<span class="dv">00</span>)
<span class="dv">0</span>

&gt; data.sort([<span class="dv">2017</span><span class="bn">-05</span>-24T00:<span class="dv">00</span>:<span class="dv">00</span>, <span class="dv">2017</span><span class="bn">-05</span>-25T00:<span class="dv">00</span>:<span class="dv">00</span>, <span class="dv">nil</span>, <span class="dv">2017</span><span class="bn">-05</span>-24T00:<span class="bn">01</span>:<span class="dv">00</span>, <span class="dv">2017</span><span class="bn">-05</span>-24T02:<span class="dv">00</span>:<span class="dv">00</span>], time.compare)
[<span class="dv">nil</span>, <span class="dv">2017</span><span class="bn">-05</span>-24T00:<span class="dv">00</span>:00Z@<span class="st">`UTC`</span>, <span class="dv">2017</span><span class="bn">-05</span>-24T00:<span class="bn">01</span>:00Z@<span class="st">`UTC`</span>, <span class="dv">2017</span><span class="bn">-05</span>-24T02:<span class="dv">00</span>:00Z@<span class="st">`UTC`</span>, <span class="dv">2017</span><span class="bn">-05</span>-25T00:<span class="dv">00</span>:00Z@<span class="st">`UTC`</span>]</code></pre></div>
<h3 id="formatter">formatter</h3>
<pre><code>(
  string pattern=&quot;uuuu-MM-dd&#39;T&#39;HH:mm:ssZZZZZ&#39;@`&#39;VV&#39;`&#39;&quot;,
  string lang=&quot;en-US&quot;
) -&gt; function</code></pre>
<p>Returns a function <code>f</code> that accepts a single datetime parameter <code>x</code>, and returns a string representation of <code>x</code> using the
supplied <a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#patterns">pattern</a> and language tag.</p>
<p><code>f</code> returns <code>nil</code> if passed <code>nil</code> as an argument.</p>
<p>Throws an error if any argument is <code>nil</code>.<br />
Throws an error if <code>pattern</code> is not a valid <a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#patterns">pattern</a> for the DateTimeFormatter of the Java language.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; <span class="st">f: </span>time.formatter(<span class="st">&quot;d MMM uuuu&quot;</span>)
function

&gt; f(time.epoch)
<span class="st">&quot;1 Jan 1970&quot;</span>

&gt; <span class="st">f: </span>time.formatter(<span class="st">&quot;d MMM uuuu&quot;</span>, <span class="st">&quot;fr&quot;</span>)
function

&gt; f(time.epoch)
<span class="st">&quot;1 janv. 1970&quot;</span>

&gt; <span class="st">f: </span>time.formatter(<span class="st">&quot;cccc, d MMMM uuuu&quot;</span>)
function

&gt; f(time.epoch)
<span class="st">&quot;Thursday, 1 January 1970&quot;</span>

&gt; <span class="st">f: </span>time.formatter(<span class="st">&quot;cccc, d MMMM uuuu&quot;</span>, <span class="st">&quot;de&quot;</span>)
function

&gt; f(time.epoch)
<span class="st">&quot;Donnerstag, 1 Januar 1970&quot;</span></code></pre></div>
<h3 id="parser">parser</h3>
<pre><code>(
  string pattern=&quot;uuuu-MM-dd&#39;T&#39;HH:mm:ss[ZZZZZ][&#39;@`&#39;VV&#39;`&#39;]&quot;,
  boolean lenient=false,
  string lang=&quot;en-US&quot;,
  string default_tz=&quot;UTC&quot;
) -&gt; function</code></pre>
<p>Returns a function <code>f</code> that accepts a single string paramter <code>x</code> and returns a parsed datetime value as specified by the supplied
<a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#patterns">pattern</a> and language tag.</p>
<p>If <code>lenient</code> is false, <code>f</code> throws an error on strings that parse to invalid dates.<br />
If <code>lenient</code> is true, the parser will attempt to correct invalid datetime values. A date of January 32nd will parse as February 1st, for example.</p>
<p>The default time zone is used unless the pattern parses both a time component and a time zone in which case the parsed values are used.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; <span class="st">f: </span>time.parser(<span class="st">&quot;uuuu-MM-dd&#39;T&#39;HH:mm:ss[ZZZZZ][&#39;@`&#39;VV&#39;`&#39;]&quot;</span>)
function

&gt; f(<span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; f(<span class="st">&quot;2017-04-23T21:43:11&quot;</span>)
<span class="dv">2017</span><span class="bn">-04</span>-23T21:<span class="dv">43</span>:11Z@<span class="st">`UTC`</span>

&gt; f(<span class="st">&quot;2017-04-23T21:43:11@`Europe/Berlin`&quot;</span>)
<span class="dv">2017</span><span class="bn">-04</span>-23T21:<span class="dv">43</span>:<span class="dv">11+02</span>:<span class="dv">00</span>@<span class="st">`Europe/Berlin`</span>

<span class="co"># patterns specifies mandatory @ sign and backticks before timezone</span>
&gt; f(<span class="st">&quot;2017-04-23T21:43:11 Europe/Berlin&quot;</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;Text &#39;2017-04-23T21:43:11 Europe/Berlin&#39; could not be parsed, unparsed text found at index 19&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}

<span class="co"># strict parser</span>
&gt; <span class="st">f: </span>time.parser(<span class="st">&#39;uuuu-MM-dd&#39;</span>)
function

<span class="co"># there is no march 32nd</span>
&gt; f(<span class="st">&quot;2015-03-32&quot;</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;Text &#39;2015-03-32&#39; could not be parsed: Invalid value for DayOfMonth (valid values 1 - 28/31): 32&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}

<span class="co"># lenient parser</span>
&gt; <span class="st">f: </span>time.parser(<span class="st">&#39;uuuu-MM-dd&#39;</span>, <span class="dv">true</span>)
function

<span class="co"># lenient parser interprets march 32nd as april 1st</span>
&gt; f(<span class="st">&quot;2015-03-32&quot;</span>)
<span class="dv">2015</span><span class="bn">-04-01</span>T00:<span class="dv">00</span>:00Z@<span class="st">`UTC`</span>

<span class="co"># parses local times setting the default time zone</span>
&gt; <span class="st">f: </span>time.parser(<span class="st">&#39;uuuu-MM-dd[ HH:mm:ss]&#39;</span>, <span class="st">default_tz: &#39;America/Chicago&#39;</span>)
function

&gt; f(<span class="st">&quot;2017-06-22 12:34:11&quot;</span>)
<span class="dv">2017</span><span class="bn">-06</span>-22T12:<span class="dv">34</span>:<span class="dv">11</span><span class="bn">-05</span>:<span class="dv">00</span>@<span class="st">`America/Chicago`</span>

&gt; f(<span class="st">&quot;2017-06-22&quot;</span>)
<span class="dv">2017</span><span class="bn">-06</span>-22T00:<span class="dv">00</span>:<span class="dv">00</span><span class="bn">-05</span>:<span class="dv">00</span>@<span class="st">`America/Chicago`</span></code></pre></div>
<h3 id="zones">zones</h3>
<p><code>() -&gt; list</code></p>
<p>Returns a list of all known time zone ids.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; time.zones()
[<span class="st">&quot;Africa/Abidjan&quot;</span>, <span class="st">&quot;Africa/Accra&quot;</span>, <span class="st">&quot;Africa/Addis_Ababa&quot;</span>, ...]

<span class="co"># get all Europe/x time zones</span>
&gt; data.filter(time.zones(), (z) -&gt; strings.split(z, <span class="st">&quot;/&quot;</span>)[<span class="dv">0</span>] == <span class="st">&quot;Europe&quot;</span>)
[<span class="st">&quot;Europe/Amsterdam&quot;</span>, <span class="st">&quot;Europe/Andorra&quot;</span>, <span class="st">&quot;Europe/Astrakhan&quot;</span>, <span class="st">&quot;Europe/Athens&quot;</span>, ...]

<span class="co"># get all US/x time zones</span>
&gt; data.filter(time.zones(), (z) -&gt; strings.split(z, <span class="st">&quot;/&quot;</span>)[<span class="dv">0</span>] == <span class="st">&quot;US&quot;</span>)
[<span class="st">&quot;US/Alaska&quot;</span>, <span class="st">&quot;US/Aleutian&quot;</span>, <span class="st">&quot;US/Arizona&quot;</span>, <span class="st">&quot;US/Central&quot;</span>, <span class="st">&quot;US/East-Indiana&quot;</span>, <span class="st">&quot;US/Eastern&quot;</span>, ...]</code></pre></div>
<h2 id="library-math">library math</h2>
<p>The math library contains basic mathematical functions.</p>
<h3 id="abs">abs</h3>
<p><code>(x) -&gt;</code></p>
<p>If <code>x</code> is a <code>double</code>, returns the absolute value of <code>x</code> as a double.<br />
If <code>x</code> is <code>NaN</code>, the result is <code>NaN</code>.<br />
If <code>x</code> is <code>-Infinity</code> the result is <code>Infinity</code>.</p>
<p>If <code>x</code> is a <code>long</code>, returns the absolute value of <code>x</code> as a long.<br />
If <code>x</code> is a long, and is equal to <code>math.min_long</code>, the absolute value cannot be represented as a long, and an error is thrown.</p>
<p>If <code>x</code> is <code>nil</code>, returns <code>nil</code>.</p>
<p>Throws an error if <code>x</code> is not numeric and not <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; math.abs(<span class="dv">100</span>)
<span class="dv">100</span>

&gt; math.abs(-<span class="dv">100</span>)
<span class="dv">100</span>

&gt; math.abs(-<span class="fl">2.0</span>)
<span class="fl">2.0</span>

&gt; math.abs(-<span class="dt">Infinity</span>)
<span class="dt">Infinity</span>

&gt; math.abs(<span class="dt">NaN</span>)
<span class="dt">NaN</span>

&gt; math.abs(math.min_long)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;cannot represent magnitude as long&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;NUMBER_OUT_OF_BOUNDS&quot;</span>,
  ...
}

&gt; math.abs(math.min_long as double)
<span class="fl">9.223372036854776E18</span>

&gt; math.abs(<span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; math.abs(<span class="st">&quot;hello&quot;</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;cannot determine magnitude of type string&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="rand">rand</h3>
<p><code>(any seed) -&gt; double</code></p>
<p>Returns a pseudo-random double between <code>0.0</code> inclusive and <code>1.0</code> exclusive, based on given <code>seed</code>.
This function is pure and deterministically returns the same number for the same <code>seed</code>.</p>
<p>To generate a sequence of pseudo-random numbers, you can use a previously generated number as the next <code>seed</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; <span class="st">dice_roll: </span>(any seed) -&gt; (math.rand(seed) *<span class="dv">6</span> +<span class="dv">1</span>) as long
function

&gt; dice_roll(<span class="st">&quot;hello&quot;</span>)
<span class="dv">3</span>

&gt; dice_roll(<span class="st">&quot;hi&quot;</span>)
<span class="dv">6</span>

&gt; \e
  <span class="st">dice_rolls: </span>(long count, any seed) -&gt;
    fun.iterate(<span class="dv">1</span>, count,
      {<span class="st">:seed</span> [seed], <span class="st">:nums</span> []},
      (d, i) -&gt; let {
          <span class="st">r: </span>math.rand(d[<span class="st">:seed</span>])
          <span class="st">n: </span>(r*<span class="dv">6+1</span>) as long
        }
        {
          <span class="st">:seed</span> data.append(d[<span class="st">:seed</span>], r*i)
          <span class="st">:nums</span> data.append(d[<span class="st">:nums</span>], n)
        }
    )[<span class="st">:nums</span>]
\e
function

&gt; dice_rolls(<span class="dv">3</span>, <span class="st">&quot;foo&quot;</span>)
[<span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">5</span>]

&gt; dice_rolls(<span class="dv">20</span>, <span class="st">&quot;foo&quot;</span>)
[<span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">6</span>]

&gt; dice_rolls(<span class="dv">3</span>, <span class="st">&quot;bar&quot;</span>)
[<span class="dv">6</span>, <span class="dv">1</span>, <span class="dv">1</span>]

&gt; dice_rolls(<span class="dv">20</span>, <span class="st">&quot;bar&quot;</span>)
[<span class="dv">6</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>]

&gt; math.rand(<span class="dv">nil</span>)
<span class="fl">0.730967787376657</span></code></pre></div>
<h3 id="inc">inc</h3>
<p><code>(any x) -&gt; any</code></p>
<p>Increments <code>x</code> by one.</p>
<p>If <code>x</code> is a double, returns x+1.0.<br />
If <code>x</code> is a long, returns x+1.<br />
If <code>x</code> is <code>nil</code>, returns <code>nil</code>.</p>
<p>Throws an error if <code>x</code> is not a numeric type.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; math.inc(<span class="fl">2.0</span>)
<span class="fl">3.0</span>

&gt; math.inc(-<span class="fl">2.0</span>)
-<span class="fl">1.0</span>

&gt; math.inc(<span class="dv">1</span>)
<span class="dv">2</span>

&gt; math.inc(math.max_long)
-<span class="dv">9223372036854775808</span> <span class="co"># overflow to math.min_long</span>

&gt; math.inc(<span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; math.inc([])
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;cannot increment type list&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="dec">dec</h3>
<p><code>(any x) -&gt; any</code></p>
<p>Decrements <code>x</code> by one.</p>
<p>If <code>x</code> is a double, returns x-1.0.<br />
If <code>x</code> is a long, returns x-1.<br />
If <code>x</code> is <code>nil</code>, returns <code>nil</code>.</p>
<p>Throws an error if <code>x</code> is not a numeric type.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; math.dec(<span class="fl">2.0</span>)
<span class="fl">1.0</span>

&gt; math.dec(-<span class="fl">2.0</span>)
-<span class="fl">3.0</span>

&gt; math.dec(<span class="dv">1</span>)
<span class="dv">0</span>

&gt; math.dec(math.min_long)
<span class="dv">9223372036854775807</span> <span class="co"># overflow to math.max_long</span>

&gt; math.dec(<span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; math.dec([])
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;cannot decrement type list&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="compare-1">compare</h3>
<p><code>(a, b) -&gt; long</code></p>
<p>Compares long or double numbers a and b according to their numeric order.</p>
<p>Returns -1 if a &lt; b.<br />
Returns 1 if a &gt; b.<br />
Returns 0 if a == b.</p>
<p>The order reflected by this function sorts these values in order: <code>nil</code>, <code>NaN</code>, <code>-Infinity</code>, finite numeric values, and <code>Infinity</code>.</p>
<p>Throws an error if <code>a</code> or <code>b</code> are not <code>nil</code>, nor of type <code>long</code> or <code>double</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; math.compare(<span class="dv">1</span>, <span class="dv">1</span>)
<span class="dv">0</span>

&gt; math.compare(<span class="dv">nil</span>, <span class="dv">7</span>)
-<span class="dv">1</span>

&gt; math.compare(<span class="fl">7.0</span>, <span class="dv">2</span>)
<span class="dv">1</span>

&gt; data.sort([<span class="dv">4</span>, <span class="dv">3</span>, <span class="fl">2.5</span>, <span class="dv">1</span>, <span class="fl">0.2</span>, <span class="dv">nil</span>, <span class="dt">NaN</span>, -<span class="dt">Infinity</span>, <span class="dt">Infinity</span>], math.compare)
[<span class="dv">nil</span>, <span class="dt">NaN</span>, -<span class="dt">Infinity</span>, <span class="fl">0.2</span>, <span class="dv">1</span>, <span class="fl">2.5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dt">Infinity</span>]</code></pre></div>
<h3 id="min">min</h3>
<p><code>(list xs) -&gt; any</code></p>
<p>Given a list of numeric <code>xs</code>, returns the smallest <code>x</code>.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>, <code>xs</code> is empty, or any <code>x</code> in <code>xs</code> is <code>nil</code>.</p>
<p>Throws an error if any <code>x</code> is non-numeric.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; math.min([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])
<span class="dv">1</span>

&gt; math.min([<span class="fl">1.0</span>, <span class="fl">2.0</span>, -<span class="fl">3.0</span>])
-<span class="fl">3.0</span>

&gt; math.min([<span class="dv">1</span>, <span class="dv">nil</span>])
<span class="dv">nil</span>

&gt; math.min(<span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; math.min([<span class="st">&quot;foo&quot;</span>])
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;cannot compare type string&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="max">max</h3>
<p><code>(list xs) -&gt; any</code></p>
<p>Given a list of numeric <code>xs</code>, returns the largest <code>x</code>.</p>
<p>Returns <code>nil</code> if <code>xs</code> is <code>nil</code>, <code>xs</code> is empty, or any <code>x</code> in <code>xs</code> is <code>nil</code>.</p>
<p>Throws an error if any <code>x</code> is non-numeric.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; math.max([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])
<span class="dv">3</span>

&gt; math.max([<span class="fl">1.0</span>, <span class="fl">2.0</span>, -<span class="fl">3.0</span>])
<span class="fl">2.0</span>

&gt; math.max([<span class="dv">1</span>, <span class="dv">nil</span>])
<span class="dv">nil</span>

&gt; math.max(<span class="dv">nil</span>)
<span class="dv">nil</span>

&gt; math.max([<span class="st">&quot;foo&quot;</span>])
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;cannot compare type string&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}</code></pre></div>
<h3 id="round">round</h3>
<p><code>(double x) -&gt; double</code></p>
<p>Given a double <code>x</code>, returns <code>x</code> rounded to the closest integral value.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; math.round(<span class="fl">2.3</span>)
<span class="fl">2.0</span>

&gt; math.round(-<span class="fl">2.3</span>)
-<span class="fl">2.0</span>

&gt; math.round(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="ceil">ceil</h3>
<p><code>(double x) -&gt; double</code></p>
<p>Given a double <code>x</code>, returns <code>x</code> to the next larger integral value.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; math.ceil(<span class="fl">2.3</span>)
<span class="fl">3.0</span>

&gt; math.ceil(-<span class="fl">2.3</span>)
-<span class="fl">2.0</span>

&gt; math.ceil(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="floor">floor</h3>
<p><code>(double x) -&gt; double</code></p>
<p>Given a double <code>x</code>, returns <code>x</code> to the next smaller integral value.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; math.floor(<span class="fl">2.3</span>)
<span class="fl">2.0</span>

&gt; math.floor(-<span class="fl">2.3</span>)
-<span class="fl">3.0</span>

&gt; math.floor(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="nan">nan?</h3>
<p><code>(double x) -&gt; boolean</code></p>
<p>Given a double <code>x</code>, returns <code>true</code> if <code>x</code> is NaN, returns <code>false</code> otherwise.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; math.nan?(<span class="fl">2.3</span>)
<span class="dv">false</span>

&gt; math.nan?(<span class="dt">NaN</span>)
<span class="dv">true</span>

&gt; math.nan?(<span class="dv">nil</span>)
<span class="dv">false</span></code></pre></div>
<h3 id="sqrt">sqrt</h3>
<p><code>(double x) -&gt; double</code></p>
<p>Given a double <code>x</code>, returns the square root of <code>x</code>.</p>
<p>Returns <code>NaN</code> if <code>x</code> is negative.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; math.sqrt(<span class="fl">9.0</span>)
<span class="fl">3.0</span>

&gt; math.sqrt(-<span class="fl">9.0</span>)
<span class="dt">NaN</span>

&gt; math.sqrt(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="sin">sin</h3>
<p><code>(double x) -&gt; double</code></p>
<p>Returns the trigonometric sine of angle <code>x</code> given in radians.<br />
Returns <code>NaN</code> if <code>x</code> is an <code>Infinity</code> or <code>NaN</code>.<br />
Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; math.sin(<span class="dv">0</span>)
<span class="fl">0.0</span>

&gt; math.sin(math.pi/<span class="dv">2</span>)
<span class="fl">1.0</span>

&gt; math.sin(<span class="dv">1</span>)
<span class="fl">0.8414709848078965</span></code></pre></div>
<h3 id="cos">cos</h3>
<p><code>(double x) -&gt; double</code></p>
<p>Returns the trigonometric cosine of angle <code>x</code> given in radians.<br />
Returns <code>NaN</code> if <code>x</code> is an <code>Infinity</code> or <code>NaN</code>.<br />
Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; math.cos(<span class="dv">0</span>)
<span class="fl">1.0</span>

&gt; math.cos(math.pi)
-<span class="fl">1.0</span>

&gt; math.cos(math.pi*<span class="dv">2</span>)
<span class="fl">1.0</span>

&gt; math.cos(<span class="dv">1</span>)
<span class="fl">0.5403023058681398</span></code></pre></div>
<h3 id="tan">tan</h3>
<p><code>(double x) -&gt; double</code></p>
<p>Returns the trigonometric tangent of angle <code>x</code> given in radians.<br />
Returns <code>NaN</code> if <code>x</code> is an <code>Infinity</code> or <code>NaN</code>.<br />
Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; math.tan(<span class="dv">0</span>)
<span class="fl">0.0</span>

&gt; math.tan(<span class="dv">1</span>)
<span class="fl">1.5574077246549023</span>

&gt; math.tan(math.pi/<span class="dv">4</span>)
<span class="fl">0.9999999999999999</span></code></pre></div>
<h3 id="asin">asin</h3>
<p><code>(double x) -&gt; double</code></p>
<p>Returns the arc sine of <code>x</code> in the range of -pi/2 throuh pi/2.<br />
Returns <code>NaN</code> if <code>x</code> is <code>NaN</code> or its absolute value is greater than 1.<br />
Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; math.asin(<span class="dv">0</span>)
<span class="fl">0.0</span>

&gt; math.asin(<span class="fl">0.5</span>)
<span class="fl">0.5235987755982989</span>

&gt; math.asin(<span class="dv">1</span>)
<span class="fl">1.5707963267948966</span></code></pre></div>
<h3 id="acos">acos</h3>
<p><code>(double x) -&gt; double</code></p>
<p>Returns the arc cosine of <code>x</code> in the range of 0.0 throuh pi.<br />
Returns <code>NaN</code> if <code>x</code> is <code>NaN</code> or its absolute value is greater than 1.<br />
Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; math.acos(<span class="dv">0</span>)
<span class="fl">1.5707963267948966</span>

&gt; math.acos(<span class="fl">0.5</span>)
<span class="fl">1.0471975511965979</span>

&gt; math.acos(<span class="dv">1</span>)
<span class="fl">0.0</span>

&gt; math.acos(-<span class="dv">1</span>)
<span class="fl">3.141592653589793</span></code></pre></div>
<h3 id="atan">atan</h3>
<p><code>(double x) -&gt; double</code></p>
<p>Returns the arc tangent of <code>x</code> in the range of -pi/2 through pi/2.<br />
Returns <code>NaN</code> if <code>x</code> is <code>NaN</code>.<br />
Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; math.atan(<span class="dv">0</span>)
<span class="fl">0.0</span>

&gt; math.atan(-<span class="dv">1</span>)
-<span class="fl">0.7853981633974483</span>

&gt; math.atan(<span class="dv">1</span>)
<span class="fl">0.7853981633974483</span></code></pre></div>
<h3 id="log">log</h3>
<p><code>(double x) -&gt; double</code></p>
<p>Returns the natural logarithm (base e) of <code>x</code>.</p>
<p>Returns <code>NaN</code> if <code>x</code> is <code>NaN</code> or less than <code>0</code>.<br />
Returns <code>-Infinity</code> if <code>x</code> is <code>0</code><br />
Returns <code>Infinity</code> if <code>x</code> is <code>Infinity</code><br />
Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; math.log(<span class="dv">0</span>)
-<span class="dt">Infinity</span>

&gt; math.log(<span class="dv">1</span>)
<span class="fl">0.0</span>

&gt; math.log(math.e**<span class="dv">2</span>)
<span class="fl">2.0</span></code></pre></div>
<h3 id="log10">log10</h3>
<p><code>(double x) -&gt; double</code></p>
<p>Returns the base 10 logarithm of <code>x</code>.</p>
<p>Returns <code>NaN</code> if <code>x</code> is <code>NaN</code> or less than <code>0</code>.<br />
Returns <code>-Infinity</code> if <code>x</code> is <code>0</code><br />
Returns <code>Infinity</code> if <code>x</code> is <code>Infinity</code><br />
Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; math.log10(<span class="dv">0</span>)
-<span class="dt">Infinity</span>

&gt; math.log10(<span class="dv">1</span>)
<span class="fl">0.0</span>

&gt; math.log10(<span class="dv">100</span>)
<span class="fl">2.0</span></code></pre></div>
<h3 id="bit_count">bit_count</h3>
<p><code>(long x) -&gt; long</code></p>
<p>Given a long <code>x</code>, returns the number of bits set to 1 in the binary two's complement representation of <code>x</code>.</p>
<p>Returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; math.bit_count(<span class="dv">1</span>) <span class="co"># 1</span>
<span class="dv">1</span>

&gt; math.bit_count(<span class="dv">2</span>) <span class="co"># 10</span>
<span class="dv">1</span>

&gt; math.bit_count(<span class="dv">3</span>) <span class="co"># 11</span>
<span class="dv">2</span>

&gt; math.bit_count(<span class="dv">nil</span>)
<span class="dv">nil</span></code></pre></div>
<h3 id="formatter-1">formatter</h3>
<pre><code>(
  string pattern=&#39;0.##&#39;,
  dict decimal_symbols=nil,
  string rounding_mode=&quot;up&quot;,
  boolean always_show_decimal_separator=false
) -&gt; function</code></pre>
<p>Returns a function <code>f</code> that accepts a single <code>long</code> or <code>double</code> parameter <code>x</code>, and returns a string representation of <code>x</code> using the
supplied <a href="https://docs.oracle.com/javase/8/docs/api/java/text/DecimalFormat.html">pattern</a>,
<a href="#decimal-symbols">decimal_symbols</a>
<a href="https://docs.oracle.com/javase/8/docs/api/java/math/RoundingMode.html">rounding mode</a>, and
<a href="https://docs.oracle.com/javase/8/docs/api/java/text/DecimalFormat.html#setDecimalSeparatorAlwaysShown-boolean-">always_show_decimal_separator</a> flag.</p>
<p>If <code>decimal_symbols</code> is <code>nil</code> (the default), 'en-US' decimal symbols are used.</p>
<p><code>f</code> returns <code>nil</code> if passed <code>nil</code> as an argument.
<code>f</code> throws an error if <code>x</code> is neither a <code>double</code>, nor a <code>long</code> value.</p>
<p>Throws an error if <code>rounding_mode</code> is <code>nil</code>.<br />
Throws an error if <code>pattern</code> is not a valid <a href="https://docs.oracle.com/javase/8/docs/api/java/text/DecimalFormat.html">pattern</a> for the DecimalFormat of the Java language.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; <span class="st">f: </span>math.formatter()
function

&gt; f(<span class="dv">100</span>)
<span class="st">&quot;100&quot;</span>

&gt; f(<span class="fl">100.233</span>)
<span class="st">&quot;100.24&quot;</span>

&gt; <span class="st">f: </span>math.formatter(<span class="st">&#39;0.00&#39;</span>, locale.decimal_symbols(<span class="st">&#39;fr&#39;</span>), <span class="st">&#39;half_even&#39;</span>)
function

&gt; f(<span class="dv">100</span>)
<span class="st">&quot;100,00&quot;</span>

&gt; f(<span class="fl">100.233</span>)
<span class="st">&quot;100,23&quot;</span>

&gt; f(<span class="fl">20332.039</span>)
<span class="st">&quot;20332,04&quot;</span>

&gt; <span class="st">f: </span>math.formatter(<span class="st">&#39;#,##0.##&#39;</span>, locale.decimal_symbols(<span class="st">&#39;hi-IN&#39;</span>))
function

std.tf&gt; f(<span class="dv">648722</span>)
<span class="st">&quot;६४८,७२२&quot;</span></code></pre></div>
<h3 id="parser-1">parser</h3>
<pre><code>(
  string pattern=&#39;0.##&#39;,
  dict decimal_symbols=nil,
  boolean lenient=false
) -&gt; function</code></pre>
<p>Returns a function <code>f</code> that accepts a single string paramter <code>x</code> and returns a parsed numeric value as specified by the supplied
<a href="https://docs.oracle.com/javase/8/docs/api/java/text/DecimalFormat.html">pattern</a> and <code>decimal_symbols</code>.</p>
<p>Uses <code>en-US</code> decimal symbols if <code>decimal_symbols</code> is <code>nil</code>.</p>
<p>If <code>lenient</code> is <code>false</code> then <code>x</code> must parse as a number in its entirety. Partial matches throw an error.<br />
If <code>lenient</code> is <code>true</code> then partial matches of <code>x</code> return the number that results from parsing the partial match.</p>
<p><code>f</code> returns <code>nil</code> if <code>x</code> is <code>nil</code>.</p>
<p>Throws an error if <code>pattern</code> or <code>decimal_symbols</code> is invalid.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; <span class="st">f: </span>math.parser()

&gt; f(<span class="st">&quot;203.23&quot;</span>)
<span class="fl">203.23</span>

&gt; f(<span class="st">&quot;203.23kg&quot;</span>)
<span class="dt">ERROR</span>: {
  <span class="st">:message</span> <span class="st">&quot;Partial match not allowed. Parsing ended at index: 6&quot;</span>,
  <span class="st">:code</span> <span class="st">&quot;ILLEGAL_ARGUMENT&quot;</span>,
  ...
}

<span class="co"># lenient parser</span>
&gt; <span class="st">f: </span>math.parser(<span class="st">&#39;0.##&#39;</span>, <span class="dv">nil</span>, <span class="dv">true</span>)
function

&gt; f(<span class="st">&quot;203.23kg&quot;</span>)
<span class="fl">203.23</span>

&gt; <span class="st">f: </span>math.parser(<span class="st">&#39;#,##0.##&#39;</span>, locale.decimal_symbols(<span class="st">&#39;hi-IN&#39;</span>))
function

&gt; f(<span class="st">&quot;१०३&quot;</span>)
<span class="dv">103</span></code></pre></div>
<h3 id="e">e</h3>
<p>The double value that is closer than any other to <code>e</code>, the base of the natural logarithms.</p>
<h3 id="pi">pi</h3>
<p>The double value that is closer than any other to <code>pi</code>, the ratio of the circumference of a circle to its diameter.</p>
<h3 id="min_long">min_long</h3>
<p>The smallest representable long value: <code>-9223372036854775808</code>.</p>
<h3 id="max_long">max_long</h3>
<p>The largest representable long value: <code>9223372036854775807</code>.</p>
<h2 id="library-fun">library fun</h2>
<p>The function library contains utility functions to call functions using certain patterns or conditions. Functions in this library
provide functionality similar to control-flow features in other languages.</p>
<h3 id="times">times</h3>
<p><code>(long n, any x, function f) -&gt; any</code></p>
<p>Calls <code>f</code> <code>n</code> times with one argument. The first call of <code>f</code> receives <code>x</code> as argument.
Subsequent calls to <code>f</code> receive as argument the result of the previous call.</p>
<p>Returns the result of the last call to <code>f</code>, or <code>x</code> if <code>n</code> is <code>0</code>.</p>
<p>Returns <code>nil</code> if <code>n</code> is negative or <code>nil</code>.
Returns <code>nil</code> if <code>f</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; <span class="st">double_up: </span>(x) -&gt; <span class="dv">2</span>*x
function

&gt; fun.times(<span class="dv">10</span>, <span class="dv">1</span>, double_up)
<span class="dv">1024</span></code></pre></div>
<p>Example: computing <a href="https://en.wikipedia.org/wiki/Fibonacci_number">Fibonacci numbers</a></p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span class="co"># helper: given fibonacci number n and n+1, compute fibonacci number n+1 and n+2</span>
&gt; <span class="st">next_fib_pair: </span>(p) -&gt; <span class="kw">if</span> p == [<span class="dv">0</span>, <span class="dv">0</span>] <span class="kw">then</span> [<span class="dv">0</span>, <span class="dv">1</span>] <span class="kw">else</span> [p[<span class="dv">1</span>], p[<span class="dv">0</span>]+p[<span class="dv">1</span>]]
function

<span class="co"># compute nth fibonacci number</span>
&gt; <span class="st">fib: </span>(n) -&gt; fun.times(n, [<span class="dv">0</span>, <span class="dv">0</span>], next_fib_pair)[<span class="dv">1</span>]
function

&gt; fib(<span class="dv">10</span>)
<span class="dv">55</span>

&gt; data.map([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">10</span>], fib)
[<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">8</span>, <span class="dv">13</span>, <span class="dv">21</span>, <span class="dv">34</span>, <span class="dv">55</span>]</code></pre></div>
<h3 id="until">until</h3>
<p><code>(function p, any x, function f) -&gt; any</code></p>
<p>Calls <code>f</code> repeatedly with one argument. The first call of <code>f</code> receives <code>x</code> as argument.
Subsequent calls to <code>f</code> receive as argument the result of the previous call.</p>
<p>Before each call to <code>f</code>, the argument is tested by predicate function <code>p</code>.
If <code>p</code> returns <code>true</code>, execution completes and the tested argument is returned.</p>
<p>Returns the first argument for which <code>p</code> evaluates to <code>true</code>.</p>
<p>Returns <code>nil</code> if <code>p</code> is <code>nil</code>.
Returns <code>nil</code> if <code>f</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span class="co"># keep doubling up 1 until the result exceeds 60,000</span>
&gt; fun.until((x) -&gt; x&gt;<span class="dv">60000</span>, <span class="dv">1</span>, (x) -&gt; x*<span class="dv">2</span>)
<span class="dv">65536</span>

<span class="co"># Generate natural numbers, until their sum exceeds 100.</span>
<span class="co"># The data structure is a dict containing the list of</span>
<span class="co"># numbers at key :nums and their sum at key :sum.</span>

&gt; \e
  <span class="kw">next</span>: (x) -&gt;
    let {
      <span class="st">n: </span>data.size(x[<span class="st">:nums</span>])+<span class="dv">1</span>
    }
    {
      <span class="st">:nums</span> data.append(x[<span class="st">:nums</span>], n),
      <span class="st">:sum</span> x[<span class="st">:sum</span>]+n
    }
\e
function

&gt; fun.until((x) -&gt; x[<span class="st">:sum</span>] &gt; <span class="dv">100</span>, {<span class="st">:nums</span> [], <span class="st">:sum</span> <span class="dv">0</span>}, <span class="kw">next</span>)
{
  <span class="st">:sum</span> <span class="dv">105</span>,
  <span class="st">:nums</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>]
}</code></pre></div>
<h3 id="while">while</h3>
<p><code>(function p, any x, function f) -&gt; any</code></p>
<p>Calls <code>f</code> repeatedly with one argument. The first call of <code>f</code> receives <code>x</code> as argument.
Subsequent calls to <code>f</code> receive as argument the result of the previous call.</p>
<p>Before each call to <code>f</code>, the argument is tested by predicate function <code>p</code>.
If <code>p</code> returns <code>false</code>, execution completes and the tested argument is returned.</p>
<p>Returns the first argument for which <code>p</code> evaluates to <code>false</code>.</p>
<p>Returns <code>nil</code> if <code>p</code> is <code>nil</code>.<br />
Returns <code>nil</code> if <code>f</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span class="co"># keep doubling up 1 while the result is smaller than 60,000</span>
&gt; fun.while((x) -&gt; x&lt;<span class="dv">60000</span>, <span class="dv">1</span>, (x) -&gt; x*<span class="dv">2</span>)
<span class="dv">65536</span>

<span class="co"># Generate natural numbers, while their sum is smaller than 100.</span>
<span class="co"># The data structure is a dict containing the list of</span>
<span class="co"># numbers at key :nums and their sum at key :sum.</span>

&gt; \e
  <span class="kw">next</span>: (x) -&gt;
    let {
      <span class="st">n: </span>data.size(x[<span class="st">:nums</span>])+<span class="dv">1</span>
    }
    {
      <span class="st">:nums</span> data.append(x[<span class="st">:nums</span>], n),
      <span class="st">:sum</span> x[<span class="st">:sum</span>]+n
    }
\e
function

&gt; fun.while((x) -&gt; x[<span class="st">:sum</span>] &lt; <span class="dv">100</span>, {<span class="st">:nums</span> [], <span class="st">:sum</span> <span class="dv">0</span>}, <span class="kw">next</span>)
{
  <span class="st">:sum</span> <span class="dv">105</span>,
  <span class="st">:nums</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>]
}</code></pre></div>
<h3 id="iterate">iterate</h3>
<p><code>(long from, long to, any x, function f) -&gt; any</code></p>
<p>Calls <code>f</code> repeatedly with two arguments. The first call of <code>f</code> receives <code>x</code> as first argument.
Subsequent calls to <code>f</code> receive as first argument the result of the previous call.</p>
<p>The second argument is an index starting at <code>from</code> and ending inclusively at <code>to</code>.</p>
<p>Returns the result of the last call to <code>f</code>.</p>
<p>Returns <code>nil</code> if <code>from</code>, <code>to</code>, or <code>f</code> is <code>nil</code>.</p>
<p>Returns <code>x</code> if <code>to</code> &lt; <code>from</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span class="co"># add natural numbers 1 to 10</span>
&gt; fun.iterate(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">0</span>, (sum, i) -&gt; sum+i)
<span class="dv">55</span>

<span class="co"># make a triangle string</span>
&gt; fun.iterate(<span class="dv">1</span>, <span class="dv">8</span>, <span class="st">&quot;\n&quot;</span>, (str, i) -&gt; str .. strings.join(data.repeat(i, <span class="st">&quot;*&quot;</span>)) .. <span class="st">&quot;\n&quot;</span>)
<span class="st">&quot;</span>
<span class="st">*</span>
<span class="st">**</span>
<span class="st">***</span>
<span class="st">****</span>
<span class="st">*****</span>
<span class="st">******</span>
<span class="st">*******</span>
<span class="st">********</span>
<span class="st">&quot;</span></code></pre></div>
<h3 id="thread">thread</h3>
<p><code>(any state, list fs) -&gt; any</code></p>
<p>Calls functions from given <code>fs</code> in sequence, passing <code>state</code> as the argument to the first function,
and the result of the previous call to subsequent calls. Returns result of final call.</p>
<p>Returns <code>state</code> if <code>fs</code> is empty.
Returns <code>nil</code> if <code>fs</code> is nil.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; \e
  <span class="st">rev_str: </span>(str) -&gt; fun.thread(
    str,
    [
      (x) -&gt; strings.chars(x), <span class="co"># split to chars</span>
      (x) -&gt; data.reverse(x),  <span class="co"># reverse order</span>
      (x) -&gt; strings.join(x)   <span class="co"># and re-join</span>
    ]
  )
\e
function

&gt; rev_str(<span class="st">&quot;dlrow olleh&quot;</span>)
<span class="st">&quot;hello world&quot;</span></code></pre></div>
<h3 id="chain">chain</h3>
<p><code>(list fs) -&gt; function</code></p>
<p>Given a list of functions <code>fs</code>, returns a composite function that calls all functions in <code>fs</code> in order.</p>
<p><code>fun.chain([f, g])(x) == g(f(x))</code></p>
<p>Returns <code>nil</code> if <code>fs</code> is <code>nil</code>.
Throws an error if <code>fs</code> is empty.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; <span class="st">f: </span>fun.chain([(x) -&gt; x<span class="dv">+10</span>, (x) -&gt; x*<span class="dv">2</span>]) <span class="co"># add 10, then double result</span>
function

&gt; f(<span class="dv">1</span>)  <span class="co"># (1+10)*2</span>
<span class="dv">22</span></code></pre></div>
<h3 id="compose">compose</h3>
<p><code>(list fs) -&gt; function</code></p>
<p>Given a list of functions <code>fs</code>, returns a composite function that calls all functions in <code>fs</code> in reverse order, consistent
with conventional mathematical notation.</p>
<p><code>fun.compose([f, g])(x) == f(g(x))</code></p>
<p>Returns <code>nil</code> if <code>fs</code> is <code>nil</code>.
Throws an error if <code>fs</code> is empty.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; <span class="st">f: </span>fun.compose([(x) -&gt; x<span class="dv">+10</span>, (x) -&gt; x*<span class="dv">2</span>]) <span class="co"># double result, then add 10</span>
function

&gt; f(<span class="dv">1</span>)  <span class="co"># (1*2)+10</span>
<span class="dv">12</span></code></pre></div>
<h3 id="signature">signature</h3>
<p><code>(function f) -&gt; dict</code></p>
<p>Returns a <code>dict</code> describing the signature of <code>f</code>.</p>
<p>The following keys are present:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">key</th>
<th style="text-align: left;">value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">return_type</td>
<td style="text-align: left;">string indicating the declared return type</td>
</tr>
<tr class="even">
<td style="text-align: left;">parameters</td>
<td style="text-align: left;">list indicating the declared parameters</td>
</tr>
</tbody>
</table>
<p>Each parameter in the parameters list is a dict of the form:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">key</th>
<th style="text-align: left;">value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">index</td>
<td style="text-align: left;">long indicating the index of the parameter</td>
</tr>
<tr class="even">
<td style="text-align: left;">declared_type</td>
<td style="text-align: left;">string indicating the declared type</td>
</tr>
<tr class="odd">
<td style="text-align: left;">name</td>
<td style="text-align: left;">string indicating the name of the parameter</td>
</tr>
<tr class="even">
<td style="text-align: left;">default_value</td>
<td style="text-align: left;">the default value of the parameter</td>
</tr>
</tbody>
</table>
<p>Returns <code>nil</code> if <code>f</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; fun.signature(strings.replace)
{
  <span class="st">:return_type</span> <span class="st">&quot;string&quot;</span>,
  <span class="st">:parameters</span> [{
    <span class="st">:name</span> <span class="st">&quot;x&quot;</span>,
    <span class="st">:index</span> <span class="dv">0</span>,
    <span class="st">:default_value</span> <span class="dv">nil</span>,
    <span class="st">:declared_type</span> <span class="st">&quot;string&quot;</span>
  }, {
    <span class="st">:name</span> <span class="st">&quot;search&quot;</span>,
    <span class="st">:index</span> <span class="dv">1</span>,
    <span class="st">:default_value</span> <span class="dv">nil</span>,
    <span class="st">:declared_type</span> <span class="st">&quot;string&quot;</span>
  }, {
    <span class="st">:name</span> <span class="st">&quot;replace&quot;</span>,
    <span class="st">:index</span> <span class="dv">2</span>,
    <span class="st">:default_value</span> <span class="dv">nil</span>,
    <span class="st">:declared_type</span> <span class="st">&quot;string&quot;</span>
  }]
}

&gt; fun.signature(fun.signature)
{
  <span class="st">:return_type</span> <span class="st">&quot;dict&quot;</span>,
  <span class="st">:parameters</span> [{
    <span class="st">:name</span> <span class="st">&quot;f&quot;</span>,
    <span class="st">:index</span> <span class="dv">0</span>,
    <span class="st">:default_value</span> <span class="dv">nil</span>,
    <span class="st">:declared_type</span> <span class="st">&quot;function&quot;</span>
  }]
}</code></pre></div>
<h2 id="library-locale">library locale</h2>
<p>The locale library provides information about available localization conventions. Localization conventions
are relevant in the context of number and date formatting as well as string sorting.</p>
<h3 id="languages">languages</h3>
<p><code>(lang='en-US') -&gt; dict</code></p>
<p>Returns a dict of language tags (BCP 47) to human readable names of all available languages.
The human readable names are given in the language tag passed as the locale parameter, if available.</p>
<p>Returns <code>en-US</code> display names if <code>lang</code> is <code>nil</code> or unknown.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span class="co"># list available languages with french display names</span>
&gt; locale.languages(<span class="st">&#39;fr&#39;</span>)
{
  :<span class="st">`en-IE`</span> <span class="st">&quot;anglais (Irlande)&quot;</span>,
  :<span class="st">`ar-AE`</span> <span class="st">&quot;arabe (Emirats Arabes Unis)&quot;</span>,
  :<span class="st">`ar-JO`</span> <span class="st">&quot;arabe (Jordanie)&quot;</span>,
  <span class="st">:de</span> <span class="st">&quot;allemand&quot;</span>,
  <span class="st">:hi</span> <span class="st">&quot;hindi&quot;</span>,
  <span class="st">:no</span> <span class="st">&quot;norvégien&quot;</span>,
  :<span class="st">`be-BY`</span> <span class="st">&quot;biélorusse (Biélo-Russie)&quot;</span>,
  :<span class="st">`es-PR`</span> <span class="st">&quot;espagnol (Porto Rico)&quot;</span>,
  :<span class="st">`zh-HK`</span> <span class="st">&quot;chinois (Hong-Kong)&quot;</span>,
  :<span class="st">`en-CA`</span> <span class="st">&quot;anglais (Canada)&quot;</span>,
  :<span class="st">`zh-TW`</span> <span class="st">&quot;chinois (Taiwan)&quot;</span>,
  ...
}</code></pre></div>
<h3 id="decimal_symbols">decimal_symbols</h3>
<p><code>(lang='en-US') -&gt; dict</code></p>
<p>Returns a dict containing the decimal symbols used for number representation in given language.</p>
<p>The dict contains the following keys:</p>
<table>
<colgroup>
<col style="width: 27%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Key</th>
<th style="text-align: left;">Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">decimal_separator</td>
<td style="text-align: left;">The character representing a decimal separator.</td>
</tr>
<tr class="even">
<td style="text-align: left;">grouping_separator</td>
<td style="text-align: left;">The character representing a grouping separator.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">exponent_separator</td>
<td style="text-align: left;">The string used to separate the mantissa from the exponent in scientific notation.</td>
</tr>
<tr class="even">
<td style="text-align: left;">zero_digit</td>
<td style="text-align: left;">The character representing the zero digit. The subsequent 9 character values are treated as digits 1-9.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">minus_sign</td>
<td style="text-align: left;">The character representing the minus sign.</td>
</tr>
<tr class="even">
<td style="text-align: left;">infinity</td>
<td style="text-align: left;">The string representing infinity.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">nan</td>
<td style="text-align: left;">The string representing NaN (Not a Number) values.</td>
</tr>
</tbody>
</table>
<p>Returns <code>en-US</code> decimal symbols if <code>lang</code> is <code>nil</code>.</p>
<div class="sourceCode"><pre class="sourceCode ruby"><code class="sourceCode ruby">&gt; locale.decimal_symbols()
{
  <span class="st">:infinity</span> <span class="st">&quot;∞&quot;</span>,
  <span class="st">:grouping_separator</span> <span class="st">&quot;,&quot;</span>,
  <span class="st">:minus_sign</span> <span class="st">&quot;-&quot;</span>,
  <span class="st">:exponent_separator</span> <span class="st">&quot;E&quot;</span>,
  <span class="st">:zero_digit</span> <span class="st">&quot;0&quot;</span>,
  <span class="st">:decimal_separator</span> <span class="st">&quot;.&quot;</span>,
  <span class="st">:nan</span> <span class="st">&quot;�&quot;</span>
}

&gt; locale.decimal_symbols(<span class="st">&#39;fr&#39;</span>)
{
  <span class="st">:infinity</span> <span class="st">&quot;∞&quot;</span>,
  <span class="st">:grouping_separator</span> <span class="st">&quot; &quot;</span>,
  <span class="st">:minus_sign</span> <span class="st">&quot;-&quot;</span>,
  <span class="st">:exponent_separator</span> <span class="st">&quot;E&quot;</span>,
  <span class="st">:zero_digit</span> <span class="st">&quot;0&quot;</span>,
  <span class="st">:decimal_separator</span> <span class="st">&quot;,&quot;</span>,
  <span class="st">:nan</span> <span class="st">&quot;�&quot;</span>
}

&gt; locale.decimal_symbols(<span class="st">&#39;hi-IN&#39;</span>)
{
  <span class="st">:infinity</span> <span class="st">&quot;∞&quot;</span>,
  <span class="st">:grouping_separator</span> <span class="st">&quot;,&quot;</span>,
  <span class="st">:minus_sign</span> <span class="st">&quot;-&quot;</span>,
  <span class="st">:exponent_separator</span> <span class="st">&quot;E&quot;</span>,
  <span class="st">:zero_digit</span> <span class="st">&quot;०&quot;</span>,
  <span class="st">:decimal_separator</span> <span class="st">&quot;.&quot;</span>,
  <span class="st">:nan</span> <span class="st">&quot;�&quot;</span>
}</code></pre></div>
</div>
</section>
</div>
<script language="javascript" src="html/lib/jquery/jquery-3.2.1.min.js"></script>
<script language="javascript">window.noZensmooth = true;</script>
<script language="javascript" src="html/lib/zenscroll/zenscroll.js"></script>
<script language="javascript" src="html/lib/waypoints/lib/jquery.waypoints.min.js"></script>
<script language="javascript" src="html/lib/waypoints/lib/shortcuts/inview.min.js"></script>
<script language="javascript" src="html/module_doc.js"></script>
</body>
</html>
